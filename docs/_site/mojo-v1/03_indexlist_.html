<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Chapter 3: IndexList | Two Tutorials for Mojo using Pocket Flow</title> <meta name="generator" content="Jekyll v4.3.4" /> <meta property="og:title" content="Chapter 3: IndexList" /> <meta name="author" content="Sam Kirk" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation generated using AI to explain codebases" /> <meta property="og:description" content="Documentation generated using AI to explain codebases" /> <link rel="canonical" href="http://localhost:4000/mojo-v1/03_indexlist_.html" /> <meta property="og:url" content="http://localhost:4000/mojo-v1/03_indexlist_.html" /> <meta property="og:site_name" content="Two Tutorials for Mojo using Pocket Flow" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Chapter 3: IndexList" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","author":{"@type":"Person","name":"Sam Kirk","url":"https://www.columbia.edu/~zh2408/"},"description":"Documentation generated using AI to explain codebases","headline":"Chapter 3: IndexList","url":"http://localhost:4000/mojo-v1/03_indexlist_.html"}</script> <!-- End Jekyll SEO tag --> <!-- Add Mermaid support --> <script src="https://cdn.jsdelivr.net/npm/mermaid@11.6.0/dist/mermaid.min.js"></script> <script> document.addEventListener("DOMContentLoaded", function() { mermaid.initialize({ startOnLoad: true, theme: "default" }); // Process code blocks document.querySelectorAll('pre code.language-mermaid').forEach(function(block) { // Create a div with class 'mermaid' var mermaidDiv = document.createElement('div'); mermaidDiv.className = 'mermaid'; mermaidDiv.innerHTML = block.textContent; // Replace the parent pre with the mermaid div block.parentNode.parentNode.replaceChild(mermaidDiv, block.parentNode); console.log("Processed Mermaid block:", mermaidDiv.innerHTML.substring(0, 50) + "..."); }); console.log("Mermaid initialization complete. Version:", mermaid.version()); }); </script> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Two Tutorials for Mojo using Pocket Flow </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in My Tutorial for Crawl4ai category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/my-crawl4AI/" class="nav-list-link">My Tutorial for Crawl4ai</a><ul class="nav-list"></ul></li><li class="nav-list-item"><a href="/design.html" class="nav-list-link">System Design</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in My Tutorial for Modular's Max category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/modular_max/" class="nav-list-link">My Tutorial for Modular's Max</a><ul class="nav-list"><li class="nav-list-item "><a href="/modular_max/01_settings___settings__class__.html" class="nav-list-link">Chapter 1: Settings Class</a></li><li class="nav-list-item "><a href="/modular_max/02_serving_api_layer__fastapi_app___routers__.html" class="nav-list-link">Chapter 2: Serving API Layer</a></li><li class="nav-list-item "><a href="/modular_max/03_llm_pipeline_orchestrator___tokengeneratorpipeline___.html" class="nav-list-link">Chapter 3: LLM Pipeline Orchestrator</a></li><li class="nav-list-item "><a href="/modular_max/04_model_worker_.html" class="nav-list-link">Chapter 4: Model Worker</a></li><li class="nav-list-item "><a href="/modular_max/05_scheduler___tokengenerationscheduler____embeddingsscheduler___.html" class="nav-list-link">Chapter 5: Scheduler</a></li><li class="nav-list-item "><a href="/modular_max/06_kv_cache_management_.html" class="nav-list-link">Chapter 6: KV Cache Management</a></li><li class="nav-list-item "><a href="/modular_max/07_enginequeue_.html" class="nav-list-link">Chapter 7: EngineQueue</a></li><li class="nav-list-item "><a href="/modular_max/08_telemetry_and_metrics___metrics____metricclient___.html" class="nav-list-link">Chapter 8: Telemetry and Metrics</a></li></ul></li><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in My Tutorial for Mojo v1 category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/mojo-v1/" class="nav-list-link">My Tutorial for Mojo v1</a><ul class="nav-list"><li class="nav-list-item "><a href="/mojo-v1/01_addressspace_.html" class="nav-list-link">Chapter 1: AddressSpace</a></li><li class="nav-list-item "><a href="/mojo-v1/02_unsafepointer_.html" class="nav-list-link">Chapter 2: UnsafePointer</a></li><li class="nav-list-item active"><a href="/mojo-v1/03_indexlist_.html" class="nav-list-link active">Chapter 3: IndexList</a></li><li class="nav-list-item "><a href="/mojo-v1/04_dimlist_.html" class="nav-list-link">Chapter 4: DimList</a></li><li class="nav-list-item "><a href="/mojo-v1/05_ndbuffer_.html" class="nav-list-link">Chapter 5: NDBuffer</a></li><li class="nav-list-item "><a href="/mojo-v1/06_n_d_to_1d_indexing_logic__strided_memory_access__.html" class="nav-list-link">Chapter 6: N-D to 1D Indexing Logic</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in My Tutorial for Mojo v2 category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/mojo-v2/" class="nav-list-link">My Tutorial for Mojo v2</a><ul class="nav-list"><li class="nav-list-item "><a href="/mojo-v2/01_unsafepointer__as_used_by_ndbuffer__.html" class="nav-list-link">Chapter 1: UnsafePointer</a></li><li class="nav-list-item "><a href="/mojo-v2/02_dimlist_and_dim_.html" class="nav-list-link">Chapter 2: DimList and Dim</a></li><li class="nav-list-item "><a href="/mojo-v2/03_ndbuffer_.html" class="nav-list-link">Chapter 3: NDBuffer</a></li><li class="nav-list-item "><a href="/mojo-v2/04_strides_and_offset_computation_.html" class="nav-list-link">Chapter 4: Strides and Offset Computation</a></li><li class="nav-list-item "><a href="/mojo-v2/05_simd_data_access_.html" class="nav-list-link">Chapter 5: SIMD Data Access</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Crawl4AI category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/Crawl4AI/" class="nav-list-link">Crawl4AI</a><ul class="nav-list"><li class="nav-list-item "><a href="/Crawl4AI/01_asynccrawlerstrategy.html" class="nav-list-link">AsyncCrawlerStrategy</a></li><li class="nav-list-item "><a href="/Crawl4AI/01_configuration_system_.html" class="nav-list-link">Chapter 1: Configuration System</a></li><li class="nav-list-item "><a href="/Crawl4AI/02_asyncwebcrawler.html" class="nav-list-link">AsyncWebCrawler</a></li><li class="nav-list-item "><a href="/Crawl4AI/02_asyncwebcrawler_.html" class="nav-list-link">Chapter 2: AsyncWebCrawler</a></li><li class="nav-list-item "><a href="/Crawl4AI/03_content_extraction_pipeline_.html" class="nav-list-link">Chapter 3: Content Extraction Pipeline</a></li><li class="nav-list-item "><a href="/Crawl4AI/03_crawlerrunconfig.html" class="nav-list-link">CrawlerRunConfig</a></li><li class="nav-list-item "><a href="/Crawl4AI/04_contentscrapingstrategy.html" class="nav-list-link">ContentScrapingStrategy</a></li><li class="nav-list-item "><a href="/Crawl4AI/04_url_filtering___scoring_.html" class="nav-list-link">Chapter 4: URL Filtering & Scoring</a></li><li class="nav-list-item "><a href="/Crawl4AI/05_deep_crawling_system_.html" class="nav-list-link">Chapter 5: Deep Crawling System</a></li><li class="nav-list-item "><a href="/Crawl4AI/05_relevantcontentfilter.html" class="nav-list-link">RelevantContentFilter</a></li><li class="nav-list-item "><a href="/Crawl4AI/06_caching_system_.html" class="nav-list-link">Chapter 6: Caching System</a></li><li class="nav-list-item "><a href="/Crawl4AI/06_extractionstrategy.html" class="nav-list-link">ExtractionStrategy</a></li><li class="nav-list-item "><a href="/Crawl4AI/07_dispatcher_framework_.html" class="nav-list-link">Chapter 7: Dispatcher Framework</a></li><li class="nav-list-item "><a href="/Crawl4AI/07_crawlresult.html" class="nav-list-link">CrawlResult</a></li><li class="nav-list-item "><a href="/Crawl4AI/08_async_logging_infrastructure_.html" class="nav-list-link">Chapter 8: Async Logging Infrastructure</a></li><li class="nav-list-item "><a href="/Crawl4AI/08_deepcrawlstrategy.html" class="nav-list-link">DeepCrawlStrategy</a></li><li class="nav-list-item "><a href="/Crawl4AI/09_api___docker_integration_.html" class="nav-list-link">Chapter 9: API & Docker Integration</a></li><li class="nav-list-item "><a href="/Crawl4AI/09_cachecontext___cachemode.html" class="nav-list-link">CacheContext & CacheMode</a></li><li class="nav-list-item "><a href="/Crawl4AI/10_basedispatcher.html" class="nav-list-link">BaseDispatcher</a></li></ul></li></ul> <div class="nav-category">Crawl4AI</div> <ul class="nav-list"></ul> <div class="nav-category">Modular Max</div> <ul class="nav-list"></ul> <div class="nav-category">Mojo (v1)</div> <ul class="nav-list"></ul> <div class="nav-category">Mojo (v2)</div> <ul class="nav-list"></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Two Tutorials for Mojo using Pocket Flow" aria-label="Search Two Tutorials for Mojo using Pocket Flow" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/MrBesterTester/pf-understand" class="site-button" > View on GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/mojo-v1/">My Tutorial for Mojo v1</a></li> <li class="breadcrumb-nav-list-item"><span>Chapter 3: IndexList</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="chapter-3-working-with-multiple-dimensions-indexlist"> <a href="#chapter-3-working-with-multiple-dimensions-indexlist" class="anchor-heading" aria-labelledby="chapter-3-working-with-multiple-dimensions-indexlist"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Chapter 3: Working with Multiple Dimensions: <code class="language-plaintext highlighter-rouge">IndexList</code> </h1> <p>In the previous chapters, we explored some of Mojo’s fundamental building blocks for memory management, like <code class="language-plaintext highlighter-rouge">AddressSpace</code> for understanding different memory regions and <code class="language-plaintext highlighter-rouge">UnsafePointer</code> for directly accessing memory locations. Now, we’re going to shift our focus to a common task in programming, especially in fields like graphics, scientific computing, and AI: working with multi-dimensional data.</p> <p>Imagine you’re working with an image. An image is 2-dimensional (it has a width and a height). To specify a single pixel in that image, you need two numbers: a row and a column. Or, think about a 3D model; you’d need three coordinates (x, y, z) to define a point in space.</p> <p>Mojo provides a handy tool for exactly this: <code class="language-plaintext highlighter-rouge">IndexList</code>.</p> <h2 id="what-is-indexlist"> <a href="#what-is-indexlist" class="anchor-heading" aria-labelledby="what-is-indexlist"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What is <code class="language-plaintext highlighter-rouge">IndexList</code>? </h2> <p><code class="language-plaintext highlighter-rouge">IndexList</code> is a <strong>fixed-size list</strong>, much like a tuple in Python. Its primary job is to represent <strong>multi-dimensional coordinates (indices)</strong> or the <strong>shape of an N-dimensional array</strong>.</p> <p>Think of it like this:</p> <ul> <li><strong>Coordinates on a map</strong>: If you have a 2D map (like an image), an <code class="language-plaintext highlighter-rouge">IndexList</code> could hold <code class="language-plaintext highlighter-rouge">(row, column)</code> to pinpoint a specific location (a pixel).</li> <li><strong>Dimensions of a box</strong>: If you have a 3D box (like a 3D array of data), an <code class="language-plaintext highlighter-rouge">IndexList</code> could hold <code class="language-plaintext highlighter-rouge">(depth, height, width)</code> to describe its size.</li> </ul> <p>It’s a simple but powerful structure that helps us talk about locations and sizes in multi-dimensional spaces. As we’ll see in later chapters, <code class="language-plaintext highlighter-rouge">IndexList</code> is used internally by more complex types like <code class="language-plaintext highlighter-rouge">NDBuffer</code> (Mojo’s N-dimensional buffer, similar to a NumPy array or a tensor) to store its dimensions and the “strides” that help calculate memory offsets.</p> <h2 id="why-do-we-need-indexlist"> <a href="#why-do-we-need-indexlist" class="anchor-heading" aria-labelledby="why-do-we-need-indexlist"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Why Do We Need <code class="language-plaintext highlighter-rouge">IndexList</code>? </h2> <p>You might wonder, “Can’t I just use a regular tuple of integers?” While you could, <code class="language-plaintext highlighter-rouge">IndexList</code> offers several advantages:</p> <ol> <li><strong>Clarity and Type Safety</strong>: Using <code class="language-plaintext highlighter-rouge">IndexList</code> makes your code more explicit about its intent. When you see an <code class="language-plaintext highlighter-rouge">IndexList</code>, you know it represents a set of indices or a shape. This is clearer than a generic tuple. Mojo’s type system can also leverage this specificity.</li> <li><strong>Fixed Size at Compile Time</strong>: A key feature of <code class="language-plaintext highlighter-rouge">IndexList</code> is that its size (the number of dimensions it holds) is known when your Mojo program is compiled. This allows Mojo to perform many optimizations for better performance.</li> <li><strong>Specialized Operations</strong>: <code class="language-plaintext highlighter-rouge">IndexList</code> is designed for working with indices and comes with useful built-in functionalities like element-wise arithmetic and type casting.</li> </ol> <h2 id="creating-an-indexlist"> <a href="#creating-an-indexlist" class="anchor-heading" aria-labelledby="creating-an-indexlist"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating an <code class="language-plaintext highlighter-rouge">IndexList</code> </h2> <p>There are a couple of common ways to create an <code class="language-plaintext highlighter-rouge">IndexList</code>.</p> <h3 id="1-direct-initialization-indexlistsize"> <a href="#1-direct-initialization-indexlistsize" class="anchor-heading" aria-labelledby="1-direct-initialization-indexlistsize"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 1. Direct Initialization: <code class="language-plaintext highlighter-rouge">IndexList[size](...)</code> </h3> <p>You can directly create an <code class="language-plaintext highlighter-rouge">IndexList</code> by specifying its <code class="language-plaintext highlighter-rouge">size</code> (the number of elements it will hold) as a compile-time parameter, and then providing the values.</p><pre><code class="language-mojo">from utils import IndexList
from builtin import DType // For specifying element types

fn main_direct_init():
    // A 2D coordinate (e.g., row, column)
    // Size is 2. Elements are (by default) 64-bit integers.
    var coord2d = IndexList[2](10, 25)
    print("2D Coordinate:", coord2d) // Output: (10, 25)

    // A 3D shape (e.g., depth, height, width)
    // Size is 3.
    var shape3d = IndexList[3](3, 64, 128)
    print("3D Shape:", shape3d) // Output: (3, 64, 128)

    // You can also specify the element type.
    // Here, we use 32-bit integers.
    var coord2d_int32 = IndexList[2, element_type=DType.int32](5, 15)
    print("2D Coordinate (Int32):", coord2d_int32) // Output: (5, 15)
</code></pre><ul> <li><code class="language-plaintext highlighter-rouge">IndexList[size]</code>: <code class="language-plaintext highlighter-rouge">size</code> is a compile-time constant telling Mojo how many elements this list will hold.</li> <li><code class="language-plaintext highlighter-rouge">element_type</code>: This optional parameter specifies the data type of the numbers within the <code class="language-plaintext highlighter-rouge">IndexList</code>. If you don’t specify it, it defaults to <code class="language-plaintext highlighter-rouge">DType.int64</code> (a 64-bit integer). <code class="language-plaintext highlighter-rouge">IndexList</code> is designed to hold integral types.</li> </ul> <h3 id="2-using-the-index-factory-function"> <a href="#2-using-the-index-factory-function" class="anchor-heading" aria-labelledby="2-using-the-index-factory-function"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 2. Using the <code class="language-plaintext highlighter-rouge">Index()</code> Factory Function </h3> <p>Mojo also provides a convenient <code class="language-plaintext highlighter-rouge">Index()</code> factory function (which you import from <code class="language-plaintext highlighter-rouge">utils</code>) that often feels more natural, especially if you’re used to Python. It infers the size from the number of arguments you provide.</p><pre><code class="language-mojo">from utils import Index, IndexList // IndexList is often good to have for type annotations
from builtin import DType

fn main_factory_func():
    // The Index() function infers the size
    var point_a = Index(100, 200) // Creates an IndexList[2]
    print("Point A:", point_a)     // Output: (100, 200)

    var dimensions = Index(800, 600, 3) // Creates an IndexList[3]
    print("Dimensions:", dimensions)      // Output: (800, 600, 3)

    // You can also specify the element type with Index()
    var point_b_int32 = Index[dtype=DType.int32](50, 75)
    print("Point B (Int32):", point_b_int32) // Output: (50, 75)
</code></pre><p>The <code class="language-plaintext highlighter-rouge">Index()</code> function is often a more concise way to create <code class="language-plaintext highlighter-rouge">IndexList</code> instances.</p> <h2 id="working-with-indexlist"> <a href="#working-with-indexlist" class="anchor-heading" aria-labelledby="working-with-indexlist"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Working with <code class="language-plaintext highlighter-rouge">IndexList</code> </h2> <p>Once you have an <code class="language-plaintext highlighter-rouge">IndexList</code>, here are some common things you can do:</p> <h3 id="accessing-elements"> <a href="#accessing-elements" class="anchor-heading" aria-labelledby="accessing-elements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Accessing Elements </h3> <p>You can access individual elements of an <code class="language-plaintext highlighter-rouge">IndexList</code> using the square bracket <code class="language-plaintext highlighter-rouge">[]</code> operator, just like with Python lists or tuples. Indexing starts at 0.</p><pre><code class="language-mojo">from utils import Index

fn main_access_elements():
    var my_coords = Index(15, 30, 45) // An IndexList[3]

    var x = my_coords[0] // Get the first element
    var y = my_coords[1] // Get the second element
    var z = my_coords[2] // Get the third element

    print("X:", x) // Output: X: 15
    print("Y:", y) // Output: Y: 30
    print("Z:", z) // Output: Z: 45

    // You can also modify elements if the IndexList is mutable (declared with `var`)
    my_coords[0] = 16
    print("Modified X:", my_coords[0]) // Output: Modified X: 16
</code></pre><h3 id="getting-the-length-size"> <a href="#getting-the-length-size" class="anchor-heading" aria-labelledby="getting-the-length-size"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Getting the Length (Size) </h3> <p>The <code class="language-plaintext highlighter-rouge">len()</code> function tells you how many elements are in the <code class="language-plaintext highlighter-rouge">IndexList</code> (which matches the <code class="language-plaintext highlighter-rouge">size</code> parameter it was created with).</p><pre><code class="language-mojo">from utils import Index

fn main_get_length():
    var coord2d = Index(10, 20)
    var shape3d = Index(5, 8, 12)

    print("Length of coord2d:", len(coord2d)) // Output: Length of coord2d: 2
    print("Length of shape3d:", len(shape3d)) // Output: Length of shape3d: 3
</code></pre><h3 id="converting-to-string-printing"> <a href="#converting-to-string-printing" class="anchor-heading" aria-labelledby="converting-to-string-printing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Converting to String (Printing) </h3> <p><code class="language-plaintext highlighter-rouge">IndexList</code> knows how to represent itself as a string, so you can easily print it.</p><pre><code class="language-mojo">from utils import Index, IndexList

fn main_to_string():
    var il_multi = Index(1, 2, 3)
    print(il_multi) // Output: (1, 2, 3)

    // For single-element IndexLists, it prints with a trailing comma,
    // just like single-element tuples in Python.
    var il_single = IndexList[1](42)
    print(il_single) // Output: (42,)
</code></pre><h3 id="comparing-indexlists"> <a href="#comparing-indexlists" class="anchor-heading" aria-labelledby="comparing-indexlists"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Comparing <code class="language-plaintext highlighter-rouge">IndexList</code>s </h3> <p>You can compare two <code class="language-plaintext highlighter-rouge">IndexList</code>s for equality (<code class="language-plaintext highlighter-rouge">==</code>) or inequality (<code class="language-plaintext highlighter-rouge">!=</code>). The comparison is element-wise: two <code class="language-plaintext highlighter-rouge">IndexList</code>s are equal if they have the same size and all their corresponding elements are equal.</p><pre><code class="language-mojo">from utils import Index

fn main_compare():
    var p1 = Index(10, 20)
    var p2 = Index(10, 20)
    var p3 = Index(10, 30)

    if p1 == p2:
        print("p1 is equal to p2") // This will print
    else:
        print("p1 is not equal to p2")

    if p1 == p3:
        print("p1 is equal to p3")
    else:
        print("p1 is not equal to p3") // This will print
</code></pre><p><code class="language-plaintext highlighter-rouge">IndexList</code> also supports other comparison operators like <code class="language-plaintext highlighter-rouge">&lt;</code>, <code class="language-plaintext highlighter-rouge">&lt;=</code>, <code class="language-plaintext highlighter-rouge">&gt;</code>, <code class="language-plaintext highlighter-rouge">&gt;=</code>. These also perform element-wise comparisons, meaning <em>all</em> elements must satisfy the condition for the overall result to be true (this is different from a lexicographical comparison you might see in Python tuples).</p> <h3 id="casting-element-types"> <a href="#casting-element-types" class="anchor-heading" aria-labelledby="casting-element-types"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Casting Element Types </h3> <p>Sometimes, you might have an <code class="language-plaintext highlighter-rouge">IndexList</code> with one integer type (e.g., <code class="language-plaintext highlighter-rouge">DType.int64</code>) but need to convert it to another (e.g., <code class="language-plaintext highlighter-rouge">DType.int32</code>). The <code class="language-plaintext highlighter-rouge">cast[NewDType]()</code> method lets you do this.</p><pre><code class="language-mojo">from utils import Index
from builtin import DType

fn main_casting():
    var original_indices = Index(100, 200, -50) // Default DType.int64
    print("Original:", original_indices)

    // Cast to DType.int32
    var casted_indices_i32 = original_indices.cast[DType.int32]()
    print("Casted to Int32:", casted_indices_i32)
    // Note: The print output looks the same, but internally
    // the elements are now 32-bit integers.

    // Cast to DType.uint64 (unsigned 64-bit integer)
    // Be careful with signed to unsigned casts if there are negative numbers!
    // For positive numbers, it's usually fine.
    var positive_indices = Index(5, 10)
    var casted_indices_u64 = positive_indices.cast[DType.uint64]()
    print("Casted to UInt64:", casted_indices_u64)
</code></pre><p>Casting is useful when interfacing with functions or data structures that expect indices of a particular integer type.</p> <h3 id="arithmetic-operations"> <a href="#arithmetic-operations" class="anchor-heading" aria-labelledby="arithmetic-operations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Arithmetic Operations </h3> <p><code class="language-plaintext highlighter-rouge">IndexList</code> supports element-wise arithmetic operations like addition (<code class="language-plaintext highlighter-rouge">+</code>), subtraction (<code class="language-plaintext highlighter-rouge">-</code>), multiplication (<code class="language-plaintext highlighter-rouge">*</code>), and floor division (<code class="language-plaintext highlighter-rouge">//</code>).</p><pre><code class="language-mojo">from utils import Index

fn main_arithmetic():
    var v1 = Index(10, 20, 30)
    var v2 = Index(2,  3,  4)

    var sum_v = v1 + v2
    print("v1 + v2 =", sum_v) // Output: v1 + v2 = (12, 23, 34)

    var diff_v = v1 - v2
    print("v1 - v2 =", diff_v) // Output: v1 - v2 = (8, 17, 26)

    var prod_v = v1 * v2
    print("v1 * v2 =", prod_v) // Output: v1 * v2 = (20, 60, 120)

    var div_v = v1 // v2
    print("v1 // v2 =", div_v) // Output: v1 // v2 = (5, 6, 7)
</code></pre><p>These operations create a new <code class="language-plaintext highlighter-rouge">IndexList</code> containing the results.</p> <h2 id="a-practical-example"> <a href="#a-practical-example" class="anchor-heading" aria-labelledby="a-practical-example"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> A Practical Example </h2> <p>Let’s put some of these concepts together. Imagine we’re working with a 2D grid.</p><pre><code class="language-mojo">from utils import Index, IndexList
from builtin import DType

fn main():
    print("--- IndexList Practical Example ---")

    # Define the starting coordinates of an object on a grid
    var start_pos = Index(5, 10) # An IndexList[2] of Int64
    print("Starting position:", start_pos)

    # Define a movement vector
    var move_vector = Index(3, -2)
    print("Movement vector:", move_vector)

    # Calculate the new position by adding the start_pos and move_vector
    var end_pos = start_pos + move_vector
    print("Ending position:", end_pos) # Expected: (5+3, 10-2) = (8, 8)

    # Define the dimensions of a small tile
    var tile_shape = IndexList[2, element_type=DType.int32](16, 16)
    print("Tile shape (Int32):", tile_shape)

    # Access elements
    print("Starting X:", start_pos[0])
    print("Starting Y:", start_pos[1])
    print("Tile width:", tile_shape[0])

    # Check length
    print("Dimensions in start_pos:", len(start_pos))

    print("--- End of Practical Example ---")

</code></pre><h2 id="key-takeaways"> <a href="#key-takeaways" class="anchor-heading" aria-labelledby="key-takeaways"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Key Takeaways </h2> <ul> <li><code class="language-plaintext highlighter-rouge">IndexList</code> is a <strong>fixed-size list</strong> (like a tuple) used for representing <strong>multi-dimensional indices</strong> or <strong>shapes</strong>.</li> <li>Its size is a <strong>compile-time parameter</strong>, enabling optimizations: <code class="language-plaintext highlighter-rouge">IndexList[size](...)</code>.</li> <li>The <code class="language-plaintext highlighter-rouge">Index(...)</code> factory function is a convenient way to create them, inferring the size.</li> <li>Elements are accessed using <code class="language-plaintext highlighter-rouge">[]</code> (e.g., <code class="language-plaintext highlighter-rouge">my_list[0]</code>).</li> <li>Supports common operations: <code class="language-plaintext highlighter-rouge">len()</code>, string conversion, comparisons (<code class="language-plaintext highlighter-rouge">==</code>, <code class="language-plaintext highlighter-rouge">!=</code>, etc.), type casting (<code class="language-plaintext highlighter-rouge">.cast[DType]()</code>), and element-wise arithmetic (<code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">-</code>, <code class="language-plaintext highlighter-rouge">*</code>, <code class="language-plaintext highlighter-rouge">//</code>).</li> <li>It plays a crucial role in defining and accessing data in multi-dimensional structures like <code class="language-plaintext highlighter-rouge">NDBuffer</code>.</li> </ul> <h2 id="whats-next"> <a href="#whats-next" class="anchor-heading" aria-labelledby="whats-next"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What’s Next? </h2> <p>Understanding <code class="language-plaintext highlighter-rouge">IndexList</code> is a stepping stone. It helps us define how many dimensions something has and what its size is in each of those dimensions. In the upcoming chapters, we’ll see how types like <code class="language-plaintext highlighter-rouge">DimList</code> (another way to describe dimensions, often with more static information) and ultimately <code class="language-plaintext highlighter-rouge">NDBuffer</code> build upon these concepts to provide powerful ways to work with N-dimensional data in Mojo.</p><hr /> <p><strong>Index of Chapters (So Far):</strong></p> <ol> <li><a href="01_addressspace_.md">Chapter 1: Understanding Memory Neighborhoods with <code class="language-plaintext highlighter-rouge">AddressSpace</code></a></li> <li><a href="02_unsafepointer_.md">Chapter 2: Peeking into Memory with <code class="language-plaintext highlighter-rouge">UnsafePointer</code></a></li> <li><strong>Chapter 3: Working with Multiple Dimensions: <code class="language-plaintext highlighter-rouge">IndexList</code></strong> (You are here)</li> <li><em>Coming Soon: Chapter 4: Describing Dimensions: <code class="language-plaintext highlighter-rouge">DimList</code></em></li> <li><em>Coming Soon: Chapter 5: The N-Dimensional Buffer: <code class="language-plaintext highlighter-rouge">NDBuffer</code></em></li> <li><em>Coming Soon: Chapter 6: N-D to 1D Indexing Logic (Strided Memory Access)</em> ```</li> </ol><hr /> <p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a></p> </main> <hr> <footer> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2023 Sam Kirk</p> </footer> </div> </div> <div class="search-overlay"></div> </div> <script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.6.0/dist/mermaid.esm.min.mjs'; var config = {} ; mermaid.initialize(config); mermaid.run({ querySelector: '.language-mermaid', }); </script> </body> </html>
