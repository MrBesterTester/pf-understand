<h1 id="chapter-3-sharing-data---fastmcp-resources-resource-resourcemanager">Chapter 3: Sharing Data - FastMCP Resources (<code class="language-plaintext highlighter-rouge">Resource</code>, <code class="language-plaintext highlighter-rouge">ResourceManager</code>)</h1>

<p>In <a href="02_fastmcp_server___fastmcp__.md">Chapter 2: Easier Server Building with <code class="language-plaintext highlighter-rouge">FastMCP</code></a>, we saw how <code class="language-plaintext highlighter-rouge">FastMCP</code> and the <code class="language-plaintext highlighter-rouge">@server.tool()</code> decorator make it easy to create servers that can <em>perform actions</em> for clients, like our <code class="language-plaintext highlighter-rouge">echo</code> tool.</p>

<p>But what if your server just needs to share some <em>data</em>? Maybe it has a configuration file the client needs, a list of available items, or some text generated on the fly. You <em>could</em> make a tool for each piece of data, but that feels clunky. Isn’t there a way for clients to just browse and read data sources directly?</p>

<p>Yes, there is! Welcome to <strong>FastMCP Resources</strong>.</p>

<h2 id="the-digital-library-resources-and-the-resource-manager">The Digital Library: Resources and the Resource Manager</h2>

<p>Imagine your <code class="language-plaintext highlighter-rouge">FastMCP</code> server is like a <strong>digital library</strong>. Inside this library, you have various pieces of information:</p>
<ul>
  <li>Simple text notes (like a welcome message).</li>
  <li>Static files (like a configuration file or a small image).</li>
  <li>Information that changes (like the current time or weather).</li>
</ul>

<p>Each piece of information in this library is called a <strong><code class="language-plaintext highlighter-rouge">Resource</code></strong>. Think of each <code class="language-plaintext highlighter-rouge">Resource</code> as a book, a document, or maybe even a live news feed within the library.</p>

<p>To access any item in a library, you need its unique identifier – like a call number or an ISBN. In FastMCP, resources are identified by a <strong>URI</strong> (Uniform Resource Identifier). This looks similar to a web URL (like <code class="language-plaintext highlighter-rouge">http://example.com</code>) but can use different schemes (like <code class="language-plaintext highlighter-rouge">data://</code>, <code class="language-plaintext highlighter-rouge">file://</code>, <code class="language-plaintext highlighter-rouge">weather://</code>). For example, a welcome message might have the URI <code class="language-plaintext highlighter-rouge">data://welcome_message</code>.</p>

<p>Now, how do you find out what books are in the library, or add a new one? You talk to the <strong>librarian</strong>. In <code class="language-plaintext highlighter-rouge">FastMCP</code>, the component that keeps track of all the available resources is called the <strong><code class="language-plaintext highlighter-rouge">ResourceManager</code></strong>.</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">Resource</code></strong>: A specific piece of data (static, dynamic, file) accessible via a URI. (The book)</li>
  <li><strong><code class="language-plaintext highlighter-rouge">ResourceManager</code></strong>: Manages all the <code class="language-plaintext highlighter-rouge">Resource</code> objects registered with the <code class="language-plaintext highlighter-rouge">FastMCP</code> server. (The librarian)</li>
  <li><strong>URI</strong>: The unique address used to find and access a <code class="language-plaintext highlighter-rouge">Resource</code>. (The call number)</li>
</ul>

<p>Clients can ask the <code class="language-plaintext highlighter-rouge">ResourceManager</code> (via <code class="language-plaintext highlighter-rouge">FastMCP</code>) to list all available resources (<code class="language-plaintext highlighter-rouge">listResources</code>) and then request the content of a specific resource using its URI (<code class="language-plaintext highlighter-rouge">readResource</code>).</p>

<h2 id="adding-books-to-the-library-using-serverresource">Adding Books to the Library: Using <code class="language-plaintext highlighter-rouge">@server.resource()</code></h2>

<p>Just like <code class="language-plaintext highlighter-rouge">@server.tool()</code> made it easy to add actions, <code class="language-plaintext highlighter-rouge">FastMCP</code> provides a simple decorator, <code class="language-plaintext highlighter-rouge">@server.resource()</code>, to add data resources to your server’s library (its <code class="language-plaintext highlighter-rouge">ResourceManager</code>).</p>

<p>Let’s add a simple, static welcome message to our server.</p>

<p><strong>File: <code class="language-plaintext highlighter-rouge">library_server.py</code> (Version 1)</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 1. Import FastMCP
</span><span class="kn">from</span> <span class="nn">mcp.server.fastmcp</span> <span class="kn">import</span> <span class="n">FastMCP</span>

<span class="c1"># 2. Create the server instance
</span><span class="n">server</span> <span class="o">=</span> <span class="n">FastMCP</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"LibraryServer"</span><span class="p">)</span>

<span class="c1"># 3. Define a function that returns our static data
</span><span class="k">def</span> <span class="nf">get_welcome_message</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
  <span class="s">"""Returns a simple welcome string."""</span>
  <span class="k">return</span> <span class="s">"Welcome to the Library Server!"</span>

<span class="c1"># 4. Use the @server.resource() decorator to register the function's result
#    The URI "data://greeting" will be used by clients to access this.
</span><span class="o">@</span><span class="n">server</span><span class="p">.</span><span class="n">resource</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">"data://greeting"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"A friendly greeting."</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">welcome_resource</span><span class="p">():</span>
    <span class="c1"># This function will be called *when a client reads* the resource.
</span>    <span class="c1"># It just returns the static message.
</span>    <span class="k">return</span> <span class="n">get_welcome_message</span><span class="p">()</span> <span class="c1"># Or simply: return "Welcome..."
</span>
<span class="c1"># Standard run block
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Starting </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">..."</span><span class="p">)</span>
    <span class="n">server</span><span class="p">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> finished."</span><span class="p">)</span>
</code></pre></div></div>

<p><em>(Self-correction: The previous example was slightly complex with two functions. Let’s simplify.)</em></p>

<p><strong>File: <code class="language-plaintext highlighter-rouge">library_server.py</code> (Version 1 - Simpler)</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># 1. Import FastMCP
</span><span class="kn">from</span> <span class="nn">mcp.server.fastmcp</span> <span class="kn">import</span> <span class="n">FastMCP</span>

<span class="c1"># 2. Create the server instance
</span><span class="n">server</span> <span class="o">=</span> <span class="n">FastMCP</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"LibraryServer"</span><span class="p">)</span>

<span class="c1"># 3. Use the @server.resource() decorator directly on the function
#    that provides the data.
</span><span class="o">@</span><span class="n">server</span><span class="p">.</span><span class="n">resource</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">"data://greeting"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"A friendly greeting."</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">welcome_message</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
  <span class="s">"""
  This function is registered as the resource 'data://greeting'.
  It will be called when a client reads this resource URI.
  '-&gt; str' indicates it returns text. FastMCP sets MIME type to text/plain.
  """</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"Resource 'data://greeting' was read!"</span><span class="p">)</span> <span class="c1"># Server-side log
</span>  <span class="k">return</span> <span class="s">"Welcome to the Library Server! Enjoy your stay."</span>

<span class="c1"># 4. Standard run block
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Starting </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">..."</span><span class="p">)</span>
    <span class="n">server</span><span class="p">.</span><span class="n">run</span><span class="p">()</span> <span class="c1"># Start listening
</span>    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> finished."</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Explanation:</strong></p>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">server = FastMCP(...)</code></strong>: Creates our server (the library). Inside, it creates a <code class="language-plaintext highlighter-rouge">ResourceManager</code> (the librarian).</li>
  <li><strong><code class="language-plaintext highlighter-rouge">@server.resource(...)</code></strong>: This is our decorator “button”.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">uri="data://greeting"</code>: We assign a unique URI (call number) to this resource. The <code class="language-plaintext highlighter-rouge">data://</code> part is just a convention here, you can choose meaningful schemes.</li>
      <li><code class="language-plaintext highlighter-rouge">description="..."</code>: A helpful description for clients browsing the library.</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">def welcome_message() -&gt; str:</code></strong>: This function provides the <em>content</em> for the resource.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">-&gt; str</code>: The type hint tells <code class="language-plaintext highlighter-rouge">FastMCP</code> this resource provides text data. It will automatically set the <code class="language-plaintext highlighter-rouge">mime_type</code> to <code class="language-plaintext highlighter-rouge">text/plain</code>.</li>
      <li>The function’s body simply returns the string we want to share.</li>
      <li><strong>Important:</strong> This function is only executed when a client actually asks to <em>read</em> the resource <code class="language-plaintext highlighter-rouge">data://greeting</code>. It’s not run when the server starts.</li>
    </ul>
  </li>
  <li><strong><code class="language-plaintext highlighter-rouge">server.run()</code></strong>: Starts the server. The <code class="language-plaintext highlighter-rouge">ResourceManager</code> now knows about <code class="language-plaintext highlighter-rouge">data://greeting</code>.</li>
</ol>

<p>If you run this server (<code class="language-plaintext highlighter-rouge">mcp run library_server.py</code>), a client could:</p>
<ol>
  <li>Call <code class="language-plaintext highlighter-rouge">listResources</code> and see <code class="language-plaintext highlighter-rouge">data://greeting</code> in the list.</li>
  <li>Call <code class="language-plaintext highlighter-rouge">readResource</code> with the URI <code class="language-plaintext highlighter-rouge">data://greeting</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">FastMCP</code> would ask the <code class="language-plaintext highlighter-rouge">ResourceManager</code>, find the registered function (<code class="language-plaintext highlighter-rouge">welcome_message</code>), run it, get the string <code class="language-plaintext highlighter-rouge">"Welcome..."</code>, and send it back to the client.</li>
</ol>

<h2 id="dynamic-data-resources-generated-on-the-fly">Dynamic Data: Resources Generated on the Fly</h2>

<p>Resources don’t have to be static text. The function you decorate can do calculations, read files, or anything else to generate the data <em>when it’s requested</em>. This is great for information that changes.</p>

<p>Let’s add a resource that tells the current time.</p>

<p><strong>File: <code class="language-plaintext highlighter-rouge">library_server.py</code> (Version 2)</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">datetime</span> <span class="c1"># Need this module to get the current time
</span><span class="kn">from</span> <span class="nn">mcp.server.fastmcp</span> <span class="kn">import</span> <span class="n">FastMCP</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">FastMCP</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"LibraryServer"</span><span class="p">)</span>

<span class="o">@</span><span class="n">server</span><span class="p">.</span><span class="n">resource</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">"data://greeting"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"A friendly greeting."</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">welcome_message</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
  <span class="k">print</span><span class="p">(</span><span class="s">"Resource 'data://greeting' was read!"</span><span class="p">)</span>
  <span class="k">return</span> <span class="s">"Welcome to the Library Server! Enjoy your stay."</span>

<span class="c1"># NEW: Add a dynamic resource for the current time
</span><span class="o">@</span><span class="n">server</span><span class="p">.</span><span class="n">resource</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">"time://current"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"The current server time."</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">current_time</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
  <span class="s">"""Returns the current time as a string."""</span>
  <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
  <span class="n">time_str</span> <span class="o">=</span> <span class="n">now</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%Y-%m-%d %H:%M:%S"</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Resource 'time://current' was read! Time is </span><span class="si">{</span><span class="n">time_str</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
  <span class="c1"># The function calculates the time *each time* it's called
</span>  <span class="k">return</span> <span class="sa">f</span><span class="s">"The current server time is: </span><span class="si">{</span><span class="n">time_str</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Standard run block
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Starting </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">..."</span><span class="p">)</span>
    <span class="n">server</span><span class="p">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> finished."</span><span class="p">)</span>
</code></pre></div></div>

<p>Now, every time a client reads <code class="language-plaintext highlighter-rouge">time://current</code>, the <code class="language-plaintext highlighter-rouge">current_time</code> function will execute, get the <em>latest</em> time, format it, and return it.</p>

<h2 id="parameterized-data-resource-templates">Parameterized Data: Resource Templates</h2>

<p>What if you have data related to specific items, like weather information for different cities? You wouldn’t want to create a separate resource function for every city (<code class="language-plaintext highlighter-rouge">weather_london</code>, <code class="language-plaintext highlighter-rouge">weather_paris</code>, etc.).</p>

<p>Resource URIs can contain parameters, indicated by curly braces <code class="language-plaintext highlighter-rouge">{}</code>. When you define a resource with a parameterized URI and a function that accepts arguments matching those parameters, <code class="language-plaintext highlighter-rouge">FastMCP</code> creates a <strong>Resource Template</strong>.</p>

<p><strong>File: <code class="language-plaintext highlighter-rouge">library_server.py</code> (Version 3)</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">random</span> <span class="c1"># To simulate getting weather data
</span><span class="kn">from</span> <span class="nn">mcp.server.fastmcp</span> <span class="kn">import</span> <span class="n">FastMCP</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">FastMCP</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">"LibraryServer"</span><span class="p">)</span>

<span class="o">@</span><span class="n">server</span><span class="p">.</span><span class="n">resource</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">"data://greeting"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"A friendly greeting."</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">welcome_message</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">return</span> <span class="s">"Welcome to the Library Server! Enjoy your stay."</span>

<span class="o">@</span><span class="n">server</span><span class="p">.</span><span class="n">resource</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">"time://current"</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"The current server time."</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">current_time</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s">"The current server time is: </span><span class="si">{</span><span class="n">now</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">'%Y-%m-%d %H</span><span class="si">:</span><span class="o">%</span><span class="n">M</span><span class="si">:</span><span class="o">%</span><span class="n">S</span><span class="s">')</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># NEW: Add a resource template for weather
# The URI contains a parameter {city_name}
</span><span class="o">@</span><span class="n">server</span><span class="p">.</span><span class="n">resource</span><span class="p">(</span><span class="n">uri</span><span class="o">=</span><span class="s">"weather://forecast/{city_name}"</span><span class="p">,</span>
                  <span class="n">description</span><span class="o">=</span><span class="s">"Provides a dummy weather forecast."</span><span class="p">)</span>
<span class="c1"># The function accepts an argument matching the URI parameter
</span><span class="k">def</span> <span class="nf">get_weather_forecast</span><span class="p">(</span><span class="n">city_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="s">"""Generates a fake weather forecast for the given city."""</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Resource template 'weather://forecast/' read for city: </span><span class="si">{</span><span class="n">city_name</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
    <span class="c1"># In a real app, you'd fetch actual weather here based on city_name
</span>    <span class="n">temperature</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
    <span class="n">conditions</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="n">choice</span><span class="p">([</span><span class="s">"Sunny"</span><span class="p">,</span> <span class="s">"Cloudy"</span><span class="p">,</span> <span class="s">"Rainy"</span><span class="p">])</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s">"Forecast for </span><span class="si">{</span><span class="n">city_name</span><span class="p">.</span><span class="n">capitalize</span><span class="p">()</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">temperature</span><span class="si">}</span><span class="s">°C, </span><span class="si">{</span><span class="n">conditions</span><span class="si">}</span><span class="s">"</span>

<span class="c1"># Standard run block
</span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Starting </span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">..."</span><span class="p">)</span>
    <span class="n">server</span><span class="p">.</span><span class="n">run</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s"> finished."</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>Explanation:</strong></p>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">@server.resource(uri="weather://forecast/{city_name}", ...)</code></strong>: We define a URI with a placeholder <code class="language-plaintext highlighter-rouge">{city_name}</code>.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">def get_weather_forecast(city_name: str) -&gt; str:</code></strong>: The function signature includes a parameter <code class="language-plaintext highlighter-rouge">city_name</code> that exactly matches the name inside the curly braces in the URI.</li>
  <li><strong>How it works:</strong>
    <ul>
      <li>When a client asks to read a URI like <code class="language-plaintext highlighter-rouge">weather://forecast/london</code>, <code class="language-plaintext highlighter-rouge">FastMCP</code> sees it matches the template.</li>
      <li>It extracts the value “london” from the URI.</li>
      <li>It calls the <code class="language-plaintext highlighter-rouge">get_weather_forecast</code> function, passing <code class="language-plaintext highlighter-rouge">"london"</code> as the <code class="language-plaintext highlighter-rouge">city_name</code> argument.</li>
      <li>The function generates the forecast for London and returns the string.</li>
      <li>If the client asks for <code class="language-plaintext highlighter-rouge">weather://forecast/paris</code>, the same function is called, but with <code class="language-plaintext highlighter-rouge">city_name="paris"</code>.</li>
    </ul>
  </li>
</ol>

<p>This template approach is very powerful for providing structured data without writing repetitive code. Clients would use <code class="language-plaintext highlighter-rouge">listResourceTemplates</code> to discover templates like this.</p>

<h2 id="how-resources-work-under-the-hood">How Resources Work Under the Hood</h2>

<p>Using <code class="language-plaintext highlighter-rouge">@server.resource()</code> feels simple, but what’s happening inside <code class="language-plaintext highlighter-rouge">FastMCP</code>?</p>

<ol>
  <li><strong>Registration:</strong> When Python processes your code and sees <code class="language-plaintext highlighter-rouge">@server.resource(uri="data://greeting")</code> above the <code class="language-plaintext highlighter-rouge">welcome_message</code> function, it calls an internal <code class="language-plaintext highlighter-rouge">server.resource()</code> method.
    <ul>
      <li>This method analyzes the URI and the function.</li>
      <li>If the URI has no <code class="language-plaintext highlighter-rouge">{}</code> parameters and the function takes no arguments (or only a <code class="language-plaintext highlighter-rouge">Context</code> argument), it creates a <code class="language-plaintext highlighter-rouge">FunctionResource</code> object. This object essentially wraps your <code class="language-plaintext highlighter-rouge">welcome_message</code> function, storing its details (URI, description, the function itself).</li>
      <li>If the URI <em>does</em> have parameters matching the function’s arguments (like <code class="language-plaintext highlighter-rouge">weather://forecast/{city_name}</code> and <code class="language-plaintext highlighter-rouge">get_weather_forecast(city_name: str)</code>), it creates a <code class="language-plaintext highlighter-rouge">ResourceTemplate</code> object instead.</li>
      <li>It then tells the <code class="language-plaintext highlighter-rouge">ResourceManager</code> (the librarian) to store this <code class="language-plaintext highlighter-rouge">FunctionResource</code> or <code class="language-plaintext highlighter-rouge">ResourceTemplate</code>. (This happens via <code class="language-plaintext highlighter-rouge">_resource_manager.add_resource</code> or <code class="language-plaintext highlighter-rouge">_resource_manager.add_template</code>, referencing <code class="language-plaintext highlighter-rouge">server/fastmcp/resources/resource_manager.py</code>).</li>
    </ul>
  </li>
  <li><strong>Client Request (<code class="language-plaintext highlighter-rouge">readResource</code>)</strong>:
    <ul>
      <li>A client sends an MCP message: <code class="language-plaintext highlighter-rouge">{"method": "readResource", "params": {"uri": "data://greeting"}}</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">FastMCP</code> receives this and calls its internal <code class="language-plaintext highlighter-rouge">read_resource</code> handler (see <code class="language-plaintext highlighter-rouge">server/fastmcp/server.py</code>).</li>
      <li>The handler asks the <code class="language-plaintext highlighter-rouge">ResourceManager</code>: “Do you have a resource for the URI <code class="language-plaintext highlighter-rouge">data://greeting</code>?” (<code class="language-plaintext highlighter-rouge">_resource_manager.get_resource</code>).</li>
      <li>The <code class="language-plaintext highlighter-rouge">ResourceManager</code> checks its list of concrete resources. It finds the <code class="language-plaintext highlighter-rouge">FunctionResource</code> associated with <code class="language-plaintext highlighter-rouge">data://greeting</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">FastMCP</code> (or the <code class="language-plaintext highlighter-rouge">ResourceManager</code>) calls the <code class="language-plaintext highlighter-rouge">.read()</code> method on that <code class="language-plaintext highlighter-rouge">FunctionResource</code> object (see <code class="language-plaintext highlighter-rouge">server/fastmcp/resources/types.py</code>).</li>
      <li>The <code class="language-plaintext highlighter-rouge">FunctionResource.read()</code> method executes the original Python function you decorated (<code class="language-plaintext highlighter-rouge">welcome_message()</code>).</li>
      <li>Your function returns the string <code class="language-plaintext highlighter-rouge">"Welcome..."</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">FastMCP</code> packages this string into a valid MCP <code class="language-plaintext highlighter-rouge">readResource</code> response and sends it back to the client.</li>
    </ul>
  </li>
  <li><strong>Client Request (<code class="language-plaintext highlighter-rouge">readResource</code> with Template)</strong>:
    <ul>
      <li>Client sends: <code class="language-plaintext highlighter-rouge">{"method": "readResource", "params": {"uri": "weather://forecast/london"}}</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">FastMCP</code> asks <code class="language-plaintext highlighter-rouge">ResourceManager</code> for <code class="language-plaintext highlighter-rouge">weather://forecast/london</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">ResourceManager</code> checks concrete resources – no match.</li>
      <li><code class="language-plaintext highlighter-rouge">ResourceManager</code> checks its <code class="language-plaintext highlighter-rouge">ResourceTemplate</code> list. It finds the <code class="language-plaintext highlighter-rouge">weather://forecast/{city_name}</code> template matches the requested URI.</li>
      <li>It extracts the parameter <code class="language-plaintext highlighter-rouge">{"city_name": "london"}</code>.</li>
      <li>It uses the template to <em>dynamically create</em> a temporary <code class="language-plaintext highlighter-rouge">FunctionResource</code> for this specific request, configured to call <code class="language-plaintext highlighter-rouge">get_weather_forecast(city_name="london")</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">FastMCP</code> calls <code class="language-plaintext highlighter-rouge">.read()</code> on this temporary resource.</li>
      <li>The <code class="language-plaintext highlighter-rouge">get_weather_forecast("london")</code> function runs and returns the forecast string.</li>
      <li><code class="language-plaintext highlighter-rouge">FastMCP</code> sends the result back.</li>
    </ul>
  </li>
</ol>

<p><strong>Simplified Sequence Diagram (<code class="language-plaintext highlighter-rouge">readResource</code> for <code class="language-plaintext highlighter-rouge">data://greeting</code>):</strong></p>

<pre><code class="language-mermaid">sequenceDiagram
    participant Client
    participant FastMCP_Server as FastMCP (library_server.py)
    participant ResManager as ResourceManager (_resource_manager)
    participant FuncResource as FunctionResource (wraps welcome_message)
    participant WelcomeFunc as welcome_message()

    Client-&gt;&gt;+FastMCP_Server: Send MCP Request: readResource(uri="data://greeting")
    FastMCP_Server-&gt;&gt;+ResManager: get_resource("data://greeting")
    ResManager--&gt;&gt;-FastMCP_Server: Return FunctionResource object
    FastMCP_Server-&gt;&gt;+FuncResource: resource.read()
    FuncResource-&gt;&gt;+WelcomeFunc: Call original function welcome_message()
    WelcomeFunc--&gt;&gt;-FuncResource: Return "Welcome..."
    FuncResource--&gt;&gt;-FastMCP_Server: Return "Welcome..."
    FastMCP_Server-&gt;&gt;-Client: Send MCP Response: content="Welcome..."
</code></pre>

<p>While <code class="language-plaintext highlighter-rouge">@server.resource()</code> is the easiest way, the SDK also provides classes like <code class="language-plaintext highlighter-rouge">TextResource</code>, <code class="language-plaintext highlighter-rouge">BinaryResource</code>, <code class="language-plaintext highlighter-rouge">FileResource</code> (see <code class="language-plaintext highlighter-rouge">server/fastmcp/resources/types.py</code>) that you could potentially instantiate and add directly using <code class="language-plaintext highlighter-rouge">server.add_resource(MyTextResource(...))</code>, but the decorator handles wrapping your functions nicely.</p>

<h2 id="conclusion">Conclusion</h2>

<p>You’ve learned about FastMCP Resources – the way to share data from your server like items in a digital library.</p>

<ul>
  <li><strong>Resources (<code class="language-plaintext highlighter-rouge">Resource</code>)</strong> are data sources (text, files, dynamic content) identified by <strong>URIs</strong>.</li>
  <li>The <strong><code class="language-plaintext highlighter-rouge">ResourceManager</code></strong> keeps track of all registered resources.</li>
  <li>The <code class="language-plaintext highlighter-rouge">@server.resource()</code> decorator is the easiest way to add resources by wrapping Python functions.</li>
  <li>Resources can be <strong>static</strong> (returning the same data) or <strong>dynamic</strong> (generating data when read).</li>
  <li><strong>Resource Templates</strong> allow you to handle parameterized URIs (like <code class="language-plaintext highlighter-rouge">weather://forecast/{city}</code>) efficiently.</li>
  <li>Clients use <code class="language-plaintext highlighter-rouge">listResources</code>, <code class="language-plaintext highlighter-rouge">listResourceTemplates</code>, and <code class="language-plaintext highlighter-rouge">readResource</code> to interact with your server’s data library.</li>
</ul>

<p>Resources are essential for providing context, configuration, or any other data your clients might need to consume without executing a complex action.</p>

<p>In the next chapter, we’ll take a closer look at the other main building block we briefly saw in Chapter 2: <a href="04_fastmcp_tools___tool____toolmanager__.md">FastMCP Tools (<code class="language-plaintext highlighter-rouge">Tool</code>, <code class="language-plaintext highlighter-rouge">ToolManager</code>)</a>, and explore how they handle actions and inputs in more detail.</p>

<hr />

<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a></p>
