<h1 id="chapter-8-telemetry-service---helping-improve-the-project-optional">Chapter 8: Telemetry Service - Helping Improve the Project (Optional)</h1>

<p>In the <a href="07_data_structures__views_.md">previous chapter</a>, we explored the essential blueprints (<code class="language-plaintext highlighter-rouge">Data Structures (Views)</code>) that keep communication clear and consistent between all the parts of <code class="language-plaintext highlighter-rouge">Browser Use</code>. We saw how components like the <a href="01_agent.md">Agent</a> and the <a href="05_action_controller___registry.md">Action Controller &amp; Registry</a> use these blueprints to exchange information reliably.</p>

<p>Now, let’s think about the project itself. How do the developers who build <code class="language-plaintext highlighter-rouge">Browser Use</code> know if it’s working well for users? How do they find out about common errors or which features are most popular, so they can make the tool better?</p>

<h2 id="what-problem-does-the-telemetry-service-solve">What Problem Does the Telemetry Service Solve?</h2>

<p>Imagine you released a new tool, like <code class="language-plaintext highlighter-rouge">Browser Use</code>. You want it to be helpful, but you don’t know how people are actually using it. Are they running into unexpected errors? Are certain actions (like clicking vs. scrolling) causing problems? Is the performance okay? Without some feedback, it’s hard to know where to focus improvements.</p>

<p>One way to get feedback is through bug reports or feature requests, but that only captures a small fraction of user experiences. We need a way to get a broader, anonymous picture of how the tool is performing “in the wild.”</p>

<p>The <strong>Telemetry Service</strong> solves this by providing an <em>optional</em> and <em>anonymous</em> way to send basic usage statistics back to the project developers. Think of it like an anonymous suggestion box or an automatic crash report that doesn’t include any personal information.</p>

<p><strong>Crucially:</strong> This service is designed to protect user privacy. It doesn’t collect website content, personal data, or anything sensitive. It only sends anonymous statistics about the tool’s operation, and <strong>it can be completely disabled</strong>.</p>

<h2 id="meet-producttelemetry-the-anonymous-reporter">Meet <code class="language-plaintext highlighter-rouge">ProductTelemetry</code>: The Anonymous Reporter</h2>

<p>The component responsible for this is the <code class="language-plaintext highlighter-rouge">ProductTelemetry</code> service, found in <code class="language-plaintext highlighter-rouge">telemetry/service.py</code>.</p>

<ul>
  <li><strong>Collects Usage Data:</strong> It gathers anonymized information about events like:
    <ul>
      <li>When an <a href="01_agent.md">Agent</a> starts or finishes a run.</li>
      <li>Details about each step the Agent takes (like which actions were used).</li>
      <li>Errors encountered during agent runs.</li>
      <li>Which actions are defined in the <a href="05_action_controller___registry.md">Action Controller &amp; Registry</a>.</li>
    </ul>
  </li>
  <li><strong>Anonymizes Data:</strong> It uses a randomly generated user ID (stored locally, not linked to you) to group events from the same installation without knowing <em>who</em> the user is.</li>
  <li><strong>Sends Data:</strong> It sends this anonymous data to a secure third-party service (PostHog) used by the developers to analyze trends and identify potential issues.</li>
  <li><strong>Optional:</strong> You can easily turn it off.</li>
</ul>

<h2 id="how-is-telemetry-used-mostly-automatic">How is Telemetry Used? (Mostly Automatic)</h2>

<p>You usually don’t interact with the <code class="language-plaintext highlighter-rouge">ProductTelemetry</code> service directly. Instead, other components like the <code class="language-plaintext highlighter-rouge">Agent</code> and <code class="language-plaintext highlighter-rouge">Controller</code> automatically call it at key moments.</p>

<p><strong>Example: Agent Run Start/End</strong></p>

<p>When you create an <code class="language-plaintext highlighter-rouge">Agent</code> and call <code class="language-plaintext highlighter-rouge">agent.run()</code>, the Agent automatically notifies the Telemetry Service.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># --- File: agent/service.py (Simplified Agent run method) ---
</span><span class="k">class</span> <span class="nc">Agent</span><span class="p">:</span>
    <span class="c1"># ... (other methods) ...
</span>
    <span class="c1"># Agent has a telemetry object initialized in __init__
</span>    <span class="c1"># self.telemetry = ProductTelemetry()
</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">max_steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AgentHistoryList</span><span class="p">:</span>
        <span class="c1"># ---&gt; Tell Telemetry: Agent run is starting &lt;---
</span>        <span class="bp">self</span><span class="p">.</span><span class="n">_log_agent_run</span><span class="p">()</span> <span class="c1"># This includes a telemetry.capture() call
</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># ... (main agent loop runs here) ...
</span>            <span class="k">for</span> <span class="n">step_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_steps</span><span class="p">):</span>
                <span class="c1"># ... (agent takes steps) ...
</span>                <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">history</span><span class="p">.</span><span class="n">is_done</span><span class="p">():</span>
                    <span class="k">break</span>
            <span class="c1"># ...
</span>        <span class="k">finally</span><span class="p">:</span>
            <span class="c1"># ---&gt; Tell Telemetry: Agent run is ending &lt;---
</span>            <span class="bp">self</span><span class="p">.</span><span class="n">telemetry</span><span class="p">.</span><span class="n">capture</span><span class="p">(</span>
                <span class="n">AgentEndTelemetryEvent</span><span class="p">(</span> <span class="c1"># Uses a specific data structure
</span>                    <span class="n">agent_id</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">agent_id</span><span class="p">,</span>
                    <span class="n">is_done</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">history</span><span class="p">.</span><span class="n">is_done</span><span class="p">(),</span>
                    <span class="n">success</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">history</span><span class="p">.</span><span class="n">is_successful</span><span class="p">(),</span>
                    <span class="c1"># ... other anonymous stats ...
</span>                <span class="p">)</span>
            <span class="p">)</span>
            <span class="c1"># ... (cleanup browser etc.) ...
</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">state</span><span class="p">.</span><span class="n">history</span>
</code></pre></div></div>

<p><strong>Explanation:</strong></p>

<ol>
  <li>When the <code class="language-plaintext highlighter-rouge">Agent</code> is created, it gets an instance of <code class="language-plaintext highlighter-rouge">ProductTelemetry</code>.</li>
  <li>Inside the <code class="language-plaintext highlighter-rouge">run</code> method, before the main loop starts, <code class="language-plaintext highlighter-rouge">_log_agent_run()</code> is called, which internally uses <code class="language-plaintext highlighter-rouge">self.telemetry.capture()</code> to send an <code class="language-plaintext highlighter-rouge">AgentRunTelemetryEvent</code>.</li>
  <li>After the loop finishes (or an error occurs), the <code class="language-plaintext highlighter-rouge">finally</code> block ensures that another <code class="language-plaintext highlighter-rouge">self.telemetry.capture()</code> call is made, this time sending an <code class="language-plaintext highlighter-rouge">AgentEndTelemetryEvent</code> with summary statistics about the run.</li>
</ol>

<p>Similarly, the <code class="language-plaintext highlighter-rouge">Agent.step</code> method captures an <code class="language-plaintext highlighter-rouge">AgentStepTelemetryEvent</code>, and the <code class="language-plaintext highlighter-rouge">Controller</code>’s <code class="language-plaintext highlighter-rouge">Registry</code> captures a <code class="language-plaintext highlighter-rouge">ControllerRegisteredFunctionsTelemetryEvent</code> when it’s initialized. This happens automatically in the background if telemetry is enabled.</p>

<h2 id="how-to-disable-telemetry">How to Disable Telemetry</h2>

<p>If you prefer not to send any anonymous usage data, you can easily disable the Telemetry Service.</p>

<p>Set the environment variable <code class="language-plaintext highlighter-rouge">ANONYMIZED_TELEMETRY</code> to <code class="language-plaintext highlighter-rouge">False</code>.</p>

<p>How you set environment variables depends on your operating system:</p>

<ul>
  <li><strong>Linux/macOS (in terminal):</strong>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">ANONYMIZED_TELEMETRY</span><span class="o">=</span>False
<span class="c"># Now run your Python script in the same terminal</span>
python your_agent_script.py
</code></pre></div>    </div>
  </li>
  <li><strong>Windows (Command Prompt):</strong>
    <pre><code class="language-cmd">set ANONYMIZED_TELEMETRY=False
python your_agent_script.py
</code></pre>
  </li>
  <li><strong>Windows (PowerShell):</strong>
    <div class="language-powershell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$</span><span class="nn">env</span><span class="p">:</span><span class="nv">ANONYMIZED_TELEMETRY</span><span class="o">=</span><span class="s2">"False"</span><span class="w">
</span><span class="n">python</span><span class="w"> </span><span class="nx">your_agent_script.py</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li><strong>In Python Code (using <code class="language-plaintext highlighter-rouge">os</code> module, <em>before</em> importing <code class="language-plaintext highlighter-rouge">browser_use</code>):</strong>
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="s">'ANONYMIZED_TELEMETRY'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'False'</span>

<span class="c1"># Now import and use browser_use
</span><span class="kn">from</span> <span class="nn">browser_use</span> <span class="kn">import</span> <span class="n">Agent</span> <span class="c1"># ... other imports
# ... rest of your script ...
</span></code></pre></div>    </div>
  </li>
</ul>

<p>If this environment variable is set to <code class="language-plaintext highlighter-rouge">False</code>, the <code class="language-plaintext highlighter-rouge">ProductTelemetry</code> service will be initialized in a disabled state, and no data will be collected or sent.</p>

<h2 id="how-it-works-under-the-hood-sending-anonymous-data">How It Works Under the Hood: Sending Anonymous Data</h2>

<p>When telemetry is enabled and an event occurs (like <code class="language-plaintext highlighter-rouge">agent.run()</code> starting):</p>

<ol>
  <li><strong>Component Calls Capture:</strong> The <code class="language-plaintext highlighter-rouge">Agent</code> (or <code class="language-plaintext highlighter-rouge">Controller</code>) calls <code class="language-plaintext highlighter-rouge">telemetry.capture(event_data)</code>.</li>
  <li><strong>Telemetry Service Checks:</strong> The <code class="language-plaintext highlighter-rouge">ProductTelemetry</code> service checks if it’s enabled. If not, it does nothing.</li>
  <li><strong>Get User ID:</strong> It retrieves or generates a unique, anonymous user ID. This is typically a random UUID (like <code class="language-plaintext highlighter-rouge">a1b2c3d4-e5f6-7890-abcd-ef1234567890</code>) stored in a hidden file on your computer (<code class="language-plaintext highlighter-rouge">~/.cache/browser_use/telemetry_user_id</code>). This ID helps group events from the same installation without identifying the actual user.</li>
  <li><strong>Send to PostHog:</strong> It sends the event data (structured using Pydantic models like <code class="language-plaintext highlighter-rouge">AgentRunTelemetryEvent</code>) along with the anonymous user ID to PostHog, a third-party service specialized in product analytics.</li>
  <li><strong>Analysis:</strong> Developers can then look at aggregated, anonymous trends in PostHog (e.g., “What percentage of agent runs finish successfully?”, “What are the most common errors?”) to understand usage patterns and prioritize improvements.</li>
</ol>

<p>Here’s a simplified diagram:</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant Agent
    participant TelemetrySvc as ProductTelemetry
    participant LocalFile as ~/.cache/.../user_id
    participant PostHog

    Agent-&gt;&gt;TelemetrySvc: capture(AgentRunEvent)
    Note over TelemetrySvc: Telemetry Enabled? Yes.
    TelemetrySvc-&gt;&gt;LocalFile: Read existing User ID (or create new)
    LocalFile--&gt;&gt;TelemetrySvc: Anonymous User ID (UUID)
    Note over TelemetrySvc: Package Event + User ID
    TelemetrySvc-&gt;&gt;PostHog: Send(EventData, UserID)
    PostHog--&gt;&gt;TelemetrySvc: Acknowledgment (Optional)
</code></pre>

<p>Let’s look at the simplified code involved.</p>

<p><strong>1. Initializing Telemetry (<code class="language-plaintext highlighter-rouge">telemetry/service.py</code>)</strong></p>

<p>The service checks the environment variable during initialization.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># --- File: telemetry/service.py (Simplified __init__) ---
</span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">posthog</span> <span class="kn">import</span> <span class="n">Posthog</span> <span class="c1"># The library for the external service
</span><span class="kn">from</span> <span class="nn">browser_use.utils</span> <span class="kn">import</span> <span class="n">singleton</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="o">@</span><span class="n">singleton</span> <span class="c1"># Ensures only one instance exists
</span><span class="k">class</span> <span class="nc">ProductTelemetry</span><span class="p">:</span>
    <span class="n">USER_ID_PATH</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="p">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s">'.cache'</span> <span class="o">/</span> <span class="s">'browser_use'</span> <span class="o">/</span> <span class="s">'telemetry_user_id'</span><span class="p">)</span>
    <span class="c1"># ... (API key constants) ...
</span>    <span class="n">_curr_user_id</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Check the environment variable
</span>        <span class="n">telemetry_disabled</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">'ANONYMIZED_TELEMETRY'</span><span class="p">,</span> <span class="s">'true'</span><span class="p">).</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">'false'</span>

        <span class="k">if</span> <span class="n">telemetry_disabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">_posthog_client</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># Telemetry is off
</span>            <span class="n">logger</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="s">'Telemetry disabled by environment variable.'</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Initialize the PostHog client if enabled
</span>            <span class="bp">self</span><span class="p">.</span><span class="n">_posthog_client</span> <span class="o">=</span> <span class="n">Posthog</span><span class="p">(...)</span>
            <span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s">'Anonymized telemetry enabled.'</span> <span class="c1"># Inform the user
</span>            <span class="p">)</span>
            <span class="c1"># Optionally silence PostHog's own logs
</span>            <span class="c1"># ...
</span>
    <span class="c1"># ... (other methods) ...
</span></code></pre></div></div>

<p><strong>2. Capturing an Event (<code class="language-plaintext highlighter-rouge">telemetry/service.py</code>)</strong></p>

<p>The <code class="language-plaintext highlighter-rouge">capture</code> method sends the data if the client is active.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># --- File: telemetry/service.py (Simplified capture) ---
# Assume BaseTelemetryEvent is the base Pydantic model for events
</span><span class="kn">from</span> <span class="nn">browser_use.telemetry.views</span> <span class="kn">import</span> <span class="n">BaseTelemetryEvent</span>

<span class="k">class</span> <span class="nc">ProductTelemetry</span><span class="p">:</span>
    <span class="c1"># ... (init) ...
</span>
    <span class="k">def</span> <span class="nf">capture</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">BaseTelemetryEvent</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="c1"># Do nothing if telemetry is disabled
</span>        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">_posthog_client</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Get the anonymous user ID (lazy loaded)
</span>            <span class="n">anon_user_id</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">user_id</span>

            <span class="c1"># Send the event name and its properties (as a dictionary)
</span>            <span class="bp">self</span><span class="p">.</span><span class="n">_posthog_client</span><span class="p">.</span><span class="n">capture</span><span class="p">(</span>
                <span class="n">distinct_id</span><span class="o">=</span><span class="n">anon_user_id</span><span class="p">,</span>
                <span class="n">event</span><span class="o">=</span><span class="n">event</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="c1"># e.g., "agent_run"
</span>                <span class="n">properties</span><span class="o">=</span><span class="n">event</span><span class="p">.</span><span class="n">properties</span> <span class="c1"># Data from the event model
</span>            <span class="p">)</span>
            <span class="n">logger</span><span class="p">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s">'Telemetry event captured: </span><span class="si">{</span><span class="n">event</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">'</span><span class="p">)</span>
        <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Don't crash the main application if telemetry fails
</span>            <span class="n">logger</span><span class="p">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s">'Failed to send telemetry event </span><span class="si">{</span><span class="n">event</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s">'</span><span class="p">)</span>

    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">user_id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="s">"""Gets or creates the anonymous user ID."""</span>
        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">_curr_user_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">_curr_user_id</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># Check if the ID file exists
</span>            <span class="n">id_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">USER_ID_PATH</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">id_file</span><span class="p">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="c1"># Create directory and generate a new UUID if it doesn't exist
</span>                <span class="n">id_file</span><span class="p">.</span><span class="n">parent</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
                <span class="n">new_user_id</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">uuid</span><span class="p">.</span><span class="n">uuid4</span><span class="p">())</span>
                <span class="n">id_file</span><span class="p">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">new_user_id</span><span class="p">)</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">_curr_user_id</span> <span class="o">=</span> <span class="n">new_user_id</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Read the existing UUID from the file
</span>                <span class="bp">self</span><span class="p">.</span><span class="n">_curr_user_id</span> <span class="o">=</span> <span class="n">id_file</span><span class="p">.</span><span class="n">read_text</span><span class="p">().</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">except</span> <span class="nb">Exception</span><span class="p">:</span>
            <span class="c1"># Fallback if file access fails
</span>            <span class="bp">self</span><span class="p">.</span><span class="n">_curr_user_id</span> <span class="o">=</span> <span class="s">'UNKNOWN_USER_ID'</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">_curr_user_id</span>

</code></pre></div></div>

<p><strong>3. Event Data Structures (<code class="language-plaintext highlighter-rouge">telemetry/views.py</code>)</strong></p>

<p>Like other components, Telemetry uses Pydantic models to define the structure of the data being sent.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># --- File: telemetry/views.py (Simplified Event Example) ---
</span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">asdict</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Sequence</span>

<span class="c1"># Base class for all telemetry events (conceptual)
</span><span class="o">@</span><span class="n">dataclass</span>
<span class="k">class</span> <span class="nc">BaseTelemetryEvent</span><span class="p">:</span>
    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nb">NotImplementedError</span>
    <span class="o">@</span><span class="nb">property</span>
    <span class="k">def</span> <span class="nf">properties</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="c1"># Helper to convert the dataclass fields to a dictionary
</span>        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">asdict</span><span class="p">(</span><span class="bp">self</span><span class="p">).</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="s">'name'</span><span class="p">}</span>

<span class="c1"># Specific event for when an agent run starts
</span><span class="o">@</span><span class="n">dataclass</span>
<span class="k">class</span> <span class="nc">AgentRunTelemetryEvent</span><span class="p">(</span><span class="n">BaseTelemetryEvent</span><span class="p">):</span>
    <span class="n">agent_id</span><span class="p">:</span> <span class="nb">str</span>        <span class="c1"># Anonymous ID for the specific agent instance
</span>    <span class="n">use_vision</span><span class="p">:</span> <span class="nb">bool</span>     <span class="c1"># Was vision enabled?
</span>    <span class="n">task</span><span class="p">:</span> <span class="nb">str</span>            <span class="c1"># The task description (anonymized/hashed in practice)
</span>    <span class="n">model_name</span><span class="p">:</span> <span class="nb">str</span>      <span class="c1"># Name of the LLM used
</span>    <span class="n">chat_model_library</span><span class="p">:</span> <span class="nb">str</span> <span class="c1"># Library used for the LLM (e.g., ChatOpenAI)
</span>    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span>         <span class="c1"># browser-use version
</span>    <span class="n">source</span><span class="p">:</span> <span class="nb">str</span>          <span class="c1"># How browser-use was installed (e.g., pip, git)
</span>    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">'agent_run'</span> <span class="c1"># The event name sent to PostHog
</span>
<span class="c1"># ... other event models like AgentEndTelemetryEvent, AgentStepTelemetryEvent ...
</span></code></pre></div></div>

<p>These structures ensure the data sent to PostHog is consistent and well-defined.</p>

<h2 id="conclusion">Conclusion</h2>

<p>The <strong>Telemetry Service</strong> (<code class="language-plaintext highlighter-rouge">ProductTelemetry</code>) provides an optional and privacy-conscious way for the <code class="language-plaintext highlighter-rouge">Browser Use</code> project to gather anonymous feedback about how the tool is being used. It automatically captures events like agent runs, steps, and errors, sending anonymized statistics to developers via PostHog.</p>

<p>This feedback loop is vital for identifying common issues, understanding feature usage, and ultimately improving the <code class="language-plaintext highlighter-rouge">Browser Use</code> library for everyone. Remember, you have full control and can easily disable this service by setting the <code class="language-plaintext highlighter-rouge">ANONYMIZED_TELEMETRY=False</code> environment variable.</p>

<p>This chapter concludes our tour of the core components within the <code class="language-plaintext highlighter-rouge">Browser Use</code> project. You’ve learned about the <a href="01_agent.md">Agent</a>, the guiding <a href="02_system_prompt.md">System Prompt</a>, the isolated <a href="03_browsercontext.md">BrowserContext</a>, the webpage map (<a href="04_dom_representation.md">DOM Representation</a>), the action execution engine (<a href="05_action_controller___registry.md">Action Controller &amp; Registry</a>), the conversation tracker (<a href="06_message_manager.md">Message Manager</a>), the data blueprints (<a href="07_data_structures__views_.md">Data Structures (Views)</a>), and now the optional feedback mechanism (<a href="08_telemetry_service.md">Telemetry Service</a>). We hope this gives you a solid foundation for understanding and using <code class="language-plaintext highlighter-rouge">Browser Use</code>!</p>

<hr />

<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a></p>
