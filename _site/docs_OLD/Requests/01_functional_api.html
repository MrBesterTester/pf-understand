<h1 id="chapter-1-the-simplest-way---the-functional-api">Chapter 1: The Simplest Way - The Functional API</h1>

<p>Welcome to the world of <code class="language-plaintext highlighter-rouge">Requests</code>! If you need to get information from a website or interact with a web service using Python, <code class="language-plaintext highlighter-rouge">Requests</code> is your friendly helper.</p>

<p>Imagine you just want to quickly grab the content of a webpage, maybe check the latest news headlines from a site, or send a simple piece of data to an online service. How do you do that without getting bogged down in complex details?</p>

<p>That‚Äôs where the <strong>Functional API</strong> of <code class="language-plaintext highlighter-rouge">Requests</code> comes in. It‚Äôs the most straightforward way to start making web requests.</p>

<h2 id="whats-the-functional-api">What‚Äôs the Functional API?</h2>

<p>Think of the Functional API as a set of handy, ready-to-use tools right at the top level of the <code class="language-plaintext highlighter-rouge">requests</code> library. You don‚Äôt need to set anything up; you just call a function like <code class="language-plaintext highlighter-rouge">requests.get()</code> to fetch data or <code class="language-plaintext highlighter-rouge">requests.post()</code> to send data.</p>

<p><strong>Analogy:</strong> Ordering Takeout üçï</p>

<p>Using the Functional API is like using a generic food delivery app (like DoorDash or Uber Eats) to order a pizza from a place you‚Äôve never ordered from before.</p>

<ol>
  <li>You open the app ( <code class="language-plaintext highlighter-rouge">import requests</code>).</li>
  <li>You find the pizza place and tap ‚ÄúOrder‚Äù (<code class="language-plaintext highlighter-rouge">requests.get('pizza_place_url')</code>).</li>
  <li>The app handles finding a driver, sending them to the restaurant, picking up the pizza, and delivering it to you (Requests does all the connection and fetching work).</li>
  <li>You get your pizza (<code class="language-plaintext highlighter-rouge">Response</code> object).</li>
</ol>

<p>It‚Äôs super convenient for a one-time order!</p>

<h2 id="making-your-first-request-requestsget">Making Your First Request: <code class="language-plaintext highlighter-rouge">requests.get()</code></h2>

<p>The most common type of request is a <code class="language-plaintext highlighter-rouge">GET</code> request. It‚Äôs what your web browser does every time you type a website address and hit Enter. It means ‚ÄúPlease <em>get</em> me the content of this page.‚Äù</p>

<p>Let‚Äôs try it! First, make sure you have <code class="language-plaintext highlighter-rouge">requests</code> installed (<code class="language-plaintext highlighter-rouge">pip install requests</code>). Then, in your Python script or interactive session:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span> <span class="c1"># Import the library
</span>
<span class="c1"># The URL we want to get data from
</span><span class="n">url</span> <span class="o">=</span> <span class="s">'https://httpbin.org/get'</span> <span class="c1"># A handy website for testing requests
</span>
<span class="c1"># Use the functional API 'get' function
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Fetching data from: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># Check if the request was successful (Status Code 200 means OK)
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Status Code: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># Print the first 200 characters of the content we received
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Content (first 200 chars):"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">[:</span><span class="mi">200</span><span class="p">])</span>
</code></pre></div></div>

<p><strong>What happened here?</strong></p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">import requests</code>: We told Python we want to use the <code class="language-plaintext highlighter-rouge">requests</code> library.</li>
  <li><code class="language-plaintext highlighter-rouge">response = requests.get(url)</code>: This is the core magic! We called the <code class="language-plaintext highlighter-rouge">get</code> function directly from the <code class="language-plaintext highlighter-rouge">requests</code> module, passing the URL we want to visit.</li>
  <li><code class="language-plaintext highlighter-rouge">requests</code> did all the work: connected to the server, sent the <code class="language-plaintext highlighter-rouge">GET</code> request, and received the server‚Äôs reply.</li>
  <li>The reply is stored in the <code class="language-plaintext highlighter-rouge">response</code> variable. This isn‚Äôt just the text of the page; it‚Äôs a special <code class="language-plaintext highlighter-rouge">Response</code> object containing lots of useful information. We‚Äôll explore this more in <a href="02_request___response_models.md">Request &amp; Response Models</a>.</li>
  <li><code class="language-plaintext highlighter-rouge">response.status_code</code>: We checked the status code. <code class="language-plaintext highlighter-rouge">200</code> is the standard code for ‚ÄúEverything went okay!‚Äù. Other codes might indicate errors (like <code class="language-plaintext highlighter-rouge">404 Not Found</code>).</li>
  <li><code class="language-plaintext highlighter-rouge">response.text</code>: We accessed the main content (usually HTML or JSON) returned by the server as a string.</li>
</ol>

<h2 id="sending-data-requestspost">Sending Data: <code class="language-plaintext highlighter-rouge">requests.post()</code></h2>

<p>Sometimes, instead of just getting data, you need to <em>send</em> data to a website. This is often done when submitting a form, logging in, or telling an API to perform an action. The <code class="language-plaintext highlighter-rouge">POST</code> method is commonly used for this.</p>

<p>The Functional API provides <code class="language-plaintext highlighter-rouge">requests.post()</code> for this purpose.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># The URL we want to send data to
</span><span class="n">url</span> <span class="o">=</span> <span class="s">'https://httpbin.org/post'</span>

<span class="c1"># The data we want to send (like form fields)
# We'll use a Python dictionary
</span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="s">'username'</span><span class="p">:</span> <span class="s">'tutorial_user'</span><span class="p">,</span> <span class="s">'action'</span><span class="p">:</span> <span class="s">'learn_requests'</span><span class="p">}</span>

<span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Sending data to: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="c1"># Use the functional API 'post' function, passing the data
</span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

<span class="c1"># Check the status code
</span><span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"Status Code: </span><span class="si">{</span><span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>

<span class="c1"># The response often echoes back the data we sent
</span><span class="k">print</span><span class="p">(</span><span class="s">"Response Content:"</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">response</span><span class="p">.</span><span class="n">text</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>What‚Äôs new?</strong></p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">payload = {...}</code>: We created a Python dictionary to hold the data we want to send.</li>
  <li><code class="language-plaintext highlighter-rouge">response = requests.post(url, data=payload)</code>: We called <code class="language-plaintext highlighter-rouge">requests.post()</code>. Notice the second argument, <code class="language-plaintext highlighter-rouge">data=payload</code>. This tells <code class="language-plaintext highlighter-rouge">requests</code> to send our dictionary as form data in the body of the <code class="language-plaintext highlighter-rouge">POST</code> request.</li>
  <li>The <code class="language-plaintext highlighter-rouge">response.text</code> from <code class="language-plaintext highlighter-rouge">httpbin.org/post</code> conveniently shows us the data it received, confirming our <code class="language-plaintext highlighter-rouge">payload</code> was sent correctly.</li>
</ol>

<p><code class="language-plaintext highlighter-rouge">Requests</code> also offers functions for other HTTP methods like <code class="language-plaintext highlighter-rouge">put</code>, <code class="language-plaintext highlighter-rouge">delete</code>, <code class="language-plaintext highlighter-rouge">head</code>, <code class="language-plaintext highlighter-rouge">patch</code>, and <code class="language-plaintext highlighter-rouge">options</code>, all working similarly: <code class="language-plaintext highlighter-rouge">requests.put(...)</code>, <code class="language-plaintext highlighter-rouge">requests.delete(...)</code>, etc.</p>

<h2 id="how-it-works-under-the-hood">How It Works Under the Hood</h2>

<p>You might wonder: if it‚Äôs so simple, how does <code class="language-plaintext highlighter-rouge">requests.get()</code> actually connect to the internet and manage the request?</p>

<p>Every time you call one of these functional API methods (like <code class="language-plaintext highlighter-rouge">requests.get</code> or <code class="language-plaintext highlighter-rouge">requests.post</code>), <code class="language-plaintext highlighter-rouge">Requests</code> performs a few steps behind the scenes:</p>

<ol>
  <li><strong>Creates a temporary <code class="language-plaintext highlighter-rouge">Session</code> object:</strong> Think of a <code class="language-plaintext highlighter-rouge">Session</code> as a more advanced way to manage requests, especially when you need to talk to the same website multiple times. We‚Äôll learn all about these in the <a href="03_session.md">Session</a> chapter. For a functional API call, <code class="language-plaintext highlighter-rouge">requests</code> creates a <em>brand new, temporary</em> <code class="language-plaintext highlighter-rouge">Session</code> just for this single request.</li>
  <li><strong>Uses the <code class="language-plaintext highlighter-rouge">Session</code>:</strong> This temporary <code class="language-plaintext highlighter-rouge">Session</code> is then used to actually prepare and send your request (e.g., the <code class="language-plaintext highlighter-rouge">GET</code> to <code class="language-plaintext highlighter-rouge">https://httpbin.org/get</code>).</li>
  <li><strong>Gets the <code class="language-plaintext highlighter-rouge">Response</code>:</strong> The <code class="language-plaintext highlighter-rouge">Session</code> receives the reply from the server.</li>
  <li><strong>Returns the <code class="language-plaintext highlighter-rouge">Response</code> to you:</strong> The function gives you back the <code class="language-plaintext highlighter-rouge">Response</code> object.</li>
  <li><strong>Discards the <code class="language-plaintext highlighter-rouge">Session</code>:</strong> The temporary <code class="language-plaintext highlighter-rouge">Session</code> is immediately thrown away. It‚Äôs gone.</li>
</ol>

<p><strong>Analogy Revisited:</strong> The generic delivery app (Functional API) contacts <em>a</em> driver (creates a temporary <code class="language-plaintext highlighter-rouge">Session</code>), tells them the restaurant and your order (sends the request), the driver delivers the food (returns the <code class="language-plaintext highlighter-rouge">Response</code>), and then the app forgets about that specific driver (discards the <code class="language-plaintext highlighter-rouge">Session</code>). If you order again 5 minutes later, it starts the whole process over with potentially a different driver.</p>

<p>Here‚Äôs a simplified diagram of what happens when you call <code class="language-plaintext highlighter-rouge">requests.get()</code>:</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant User as Your Code
    participant FuncAPI as requests.get()
    participant TempSession as Temporary Session
    participant Server as Web Server

    User-&gt;&gt;FuncAPI: Call requests.get('url')
    FuncAPI-&gt;&gt;TempSession: Create new Session()
    activate TempSession
    TempSession-&gt;&gt;Server: Make HTTP GET request to 'url'
    activate Server
    Server--&gt;&gt;TempSession: Send HTTP Response back
    deactivate Server
    TempSession--&gt;&gt;FuncAPI: Return Response object
    FuncAPI--&gt;&gt;User: Return Response object
    deactivate TempSession
    Note right of FuncAPI: Temporary Session is discarded
</code></pre>

<p>You can see a glimpse of this in the <code class="language-plaintext highlighter-rouge">requests/api.py</code> code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># File: requests/api.py (Simplified view)
</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">sessions</span> <span class="c1"># Where the Session logic lives
</span>
<span class="k">def</span> <span class="nf">request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="s">"""Internal function that handles all functional API calls."""</span>

    <span class="c1"># Creates a temporary Session just for this one call.
</span>    <span class="c1"># The 'with' statement ensures it's properly closed afterwards.
</span>    <span class="k">with</span> <span class="n">sessions</span><span class="p">.</span><span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">session</span><span class="p">:</span>
        <span class="c1"># The temporary session makes the actual request.
</span>        <span class="k">return</span> <span class="n">session</span><span class="p">.</span><span class="n">request</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="s">"""Sends a GET request (functional API)."""</span>
    <span class="c1"># This is just a convenient shortcut that calls the main 'request' function.
</span>    <span class="k">return</span> <span class="n">request</span><span class="p">(</span><span class="s">"get"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="s">"""Sends a POST request (functional API)."""</span>
    <span class="c1"># Another shortcut calling the main 'request' function.
</span>    <span class="k">return</span> <span class="n">request</span><span class="p">(</span><span class="s">"post"</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">json</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="c1"># ... similar functions for put, delete, head, patch, options ...
</span></code></pre></div></div>

<p>Each function like <code class="language-plaintext highlighter-rouge">get</code>, <code class="language-plaintext highlighter-rouge">post</code>, etc., is just a simple wrapper that calls the main <code class="language-plaintext highlighter-rouge">request</code> function, which in turn creates and uses that temporary <code class="language-plaintext highlighter-rouge">Session</code>.</p>

<h2 id="when-is-it-good-when-is-it-not">When Is It Good? When Is It Not?</h2>

<p><strong>Good For:</strong></p>

<ul>
  <li>Simple, one-off requests.</li>
  <li>Quick scripts where performance isn‚Äôt critical.</li>
  <li>Learning <code class="language-plaintext highlighter-rouge">Requests</code> - it‚Äôs the easiest starting point!</li>
</ul>

<p><strong>Not Ideal For:</strong></p>

<ul>
  <li><strong>Multiple requests to the same website:</strong> Creating and tearing down a connection and a <code class="language-plaintext highlighter-rouge">Session</code> for <em>every single request</em> is inefficient. It‚Äôs like sending a separate delivery driver for each item you forgot from the grocery store.</li>
  <li><strong>Needing persistence:</strong> If the website gives you a cookie (like after logging in) and you want to use it on your <em>next</em> request to that same site, the functional API won‚Äôt remember it because the temporary <code class="language-plaintext highlighter-rouge">Session</code> (which holds cookies) is discarded after each call.</li>
  <li><strong>Fine-grained control:</strong> If you need custom configurations, specific connection pooling, or advanced features, using a <code class="language-plaintext highlighter-rouge">Session</code> object directly offers more power.</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>You‚Äôve learned about the <code class="language-plaintext highlighter-rouge">Requests</code> Functional API ‚Äì the simplest way to make web requests using functions like <code class="language-plaintext highlighter-rouge">requests.get()</code> and <code class="language-plaintext highlighter-rouge">requests.post()</code>. It‚Äôs perfect for quick tasks and getting started. You saw how it works by creating temporary <code class="language-plaintext highlighter-rouge">Session</code> objects behind the scenes.</p>

<p>While convenient for single shots, remember its limitations for performance and state persistence when dealing with multiple requests to the same site.</p>

<p>Now that you know how to <em>send</em> a basic request, what exactly do you get <em>back</em>? Let‚Äôs explore the structure of the requests we send and the powerful <code class="language-plaintext highlighter-rouge">Response</code> object we receive.</p>

<p><strong>Next:</strong> <a href="02_request___response_models.md">Chapter 2: Request &amp; Response Models</a></p>

<hr />

<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a></p>
