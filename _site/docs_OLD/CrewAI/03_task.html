<h1 id="chapter-3-task---defining-the-work">Chapter 3: Task - Defining the Work</h1>

<p>In <a href="01_crew.md">Chapter 1</a>, we met the <code class="language-plaintext highlighter-rouge">Crew</code> - our AI team manager. In <a href="02_agent.md">Chapter 2</a>, we met the <code class="language-plaintext highlighter-rouge">Agent</code>s - our specialized AI workers. Now, we need to tell these agents <em>exactly</em> what to do. How do we give them specific assignments?</p>

<p>That’s where the <code class="language-plaintext highlighter-rouge">Task</code> comes in!</p>

<h2 id="why-do-we-need-tasks">Why Do We Need Tasks?</h2>

<p>Imagine our trip planning <code class="language-plaintext highlighter-rouge">Crew</code> again. We have a ‘Travel Researcher’ <a href="02_agent.md">Agent</a> and an ‘Activity Planner’ <a href="02_agent.md">Agent</a>. Just having them isn’t enough. We need to give them clear instructions:</p>

<ul>
  <li>Researcher: “Find some sunny cities in Europe for May.”</li>
  <li>Planner: “Create a 3-day plan for the city the Researcher found.”</li>
</ul>

<p>These specific instructions are <strong><code class="language-plaintext highlighter-rouge">Task</code>s</strong> in CrewAI. Instead of one vague goal, we break the project down into smaller, concrete steps.</p>

<p><strong>Problem Solved:</strong> <code class="language-plaintext highlighter-rouge">Task</code> allows you to define individual, actionable assignments for your <a href="02_agent.md">Agent</a>s. It turns a big goal into a manageable checklist.</p>

<h2 id="what-is-a-task">What is a Task?</h2>

<p>Think of a <code class="language-plaintext highlighter-rouge">Task</code> as a <strong>work order</strong> or a <strong>specific assignment</strong> given to an <a href="02_agent.md">Agent</a>. It clearly defines what needs to be done and what the expected result should look like.</p>

<p>Here are the key ingredients of a <code class="language-plaintext highlighter-rouge">Task</code>:</p>

<ol>
  <li><strong><code class="language-plaintext highlighter-rouge">description</code></strong>: This is the most important part! It’s a clear and detailed explanation of <em>what</em> the <a href="02_agent.md">Agent</a> needs to accomplish. The more specific, the better.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">expected_output</code></strong>: This tells the <a href="02_agent.md">Agent</a> what a successful result should look like. It sets a clear target. Examples: “A list of 3 cities with pros and cons.”, “A bulleted list of activities.”, “A paragraph summarizing the key findings.”</li>
  <li><strong><code class="language-plaintext highlighter-rouge">agent</code></strong>: This specifies <em>which</em> <a href="02_agent.md">Agent</a> in your <a href="01_crew.md">Crew</a> is responsible for completing this task. Each task is typically assigned to the agent best suited for it.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">context</code></strong> (Optional but Important!): Tasks don’t usually happen in isolation. A task might need information or results from <em>previous</em> tasks. The <code class="language-plaintext highlighter-rouge">context</code> allows the output of one task to be automatically fed as input/background information to the next task in a sequence.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">tools</code></strong> (Optional): You can specify a list of <a href="04_tool.md">Tools</a> that the <a href="02_agent.md">Agent</a> is <em>allowed</em> to use specifically for <em>this</em> task. This can be useful to restrict or grant specific capabilities for certain assignments.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">async_execution</code></strong> (Optional, Advanced): You can set this to <code class="language-plaintext highlighter-rouge">True</code> if you want the task to potentially run at the same time as other asynchronous tasks. We’ll stick to synchronous (one after another) for now.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">output_json</code> / <code class="language-plaintext highlighter-rouge">output_pydantic</code></strong> (Optional, Advanced): If you need the task’s final output in a structured format like JSON, you can specify a model here.</li>
  <li><strong><code class="language-plaintext highlighter-rouge">output_file</code></strong> (Optional, Advanced): You can have the task automatically save its output to a file.</li>
</ol>

<p>A <code class="language-plaintext highlighter-rouge">Task</code> bundles the instructions (<code class="language-plaintext highlighter-rouge">description</code>, <code class="language-plaintext highlighter-rouge">expected_output</code>) and assigns them to the right worker (<code class="language-plaintext highlighter-rouge">agent</code>), potentially giving them background info (<code class="language-plaintext highlighter-rouge">context</code>) and specific equipment (<code class="language-plaintext highlighter-rouge">tools</code>).</p>

<h2 id="lets-define-a-task">Let’s Define a Task!</h2>

<p>Let’s look again at the tasks we created for our trip planning <a href="01_crew.md">Crew</a> in <a href="01_crew.md">Chapter 1</a>.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import necessary classes
</span><span class="kn">from</span> <span class="nn">crewai</span> <span class="kn">import</span> <span class="n">Task</span><span class="p">,</span> <span class="n">Agent</span> <span class="c1"># Assuming Agent class is defined as in Chapter 2
</span>
<span class="c1"># Assume 'researcher' and 'planner' agents are already defined
# researcher = Agent(role='Travel Researcher', ...)
# planner = Agent(role='Activity Planner', ...)
</span>
<span class="c1"># Define Task 1 for the Researcher
</span><span class="n">task1</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
  <span class="n">description</span><span class="o">=</span><span class="p">(</span>
      <span class="s">"Identify the top 3 European cities known for great sunny weather "</span>
      <span class="s">"around late May. Focus on cities with vibrant culture and good food."</span>
  <span class="p">),</span>
  <span class="n">expected_output</span><span class="o">=</span><span class="p">(</span>
      <span class="s">"A numbered list of 3 cities, each with a brief (1-2 sentence) justification "</span>
      <span class="s">"mentioning weather, culture, and food highlights."</span>
  <span class="p">),</span>
  <span class="n">agent</span><span class="o">=</span><span class="n">researcher</span> <span class="c1"># Assign this task to our researcher agent
</span><span class="p">)</span>

<span class="c1"># Define Task 2 for the Planner
</span><span class="n">task2</span> <span class="o">=</span> <span class="n">Task</span><span class="p">(</span>
  <span class="n">description</span><span class="o">=</span><span class="p">(</span>
      <span class="s">"Using the list of cities provided by the researcher, select the best city "</span>
      <span class="s">"and create a detailed 3-day itinerary. Include morning, afternoon, and "</span>
      <span class="s">"evening activities, plus restaurant suggestions."</span>
  <span class="p">),</span>
  <span class="n">expected_output</span><span class="o">=</span><span class="p">(</span>
      <span class="s">"A markdown formatted 3-day itinerary for the chosen city. "</span>
      <span class="s">"Include timings, activity descriptions, and 2-3 restaurant ideas."</span>
  <span class="p">),</span>
  <span class="n">agent</span><span class="o">=</span><span class="n">planner</span> <span class="c1"># Assign this task to our planner agent
</span>  <span class="c1"># context=[task1] # Optionally explicitly define context (often handled automatically)
</span><span class="p">)</span>

<span class="c1"># (You would then add these tasks to a Crew)
# print(task1)
# print(task2)
</span></code></pre></div></div>

<p><strong>Explanation:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">from crewai import Task</code>: We import the <code class="language-plaintext highlighter-rouge">Task</code> class.</li>
  <li><code class="language-plaintext highlighter-rouge">description=...</code>: We write a clear instruction for the agent. Notice how <code class="language-plaintext highlighter-rouge">task1</code> specifies the criteria (sunny, May, culture, food). <code class="language-plaintext highlighter-rouge">task2</code> explicitly mentions using the output from the previous task.</li>
  <li><code class="language-plaintext highlighter-rouge">expected_output=...</code>: We define what success looks like. <code class="language-plaintext highlighter-rouge">task1</code> asks for a numbered list with justifications. <code class="language-plaintext highlighter-rouge">task2</code> asks for a formatted itinerary. This helps the AI agent structure its response.</li>
  <li><code class="language-plaintext highlighter-rouge">agent=researcher</code> / <code class="language-plaintext highlighter-rouge">agent=planner</code>: We link each task directly to the <a href="02_agent.md">Agent</a> responsible for doing the work.</li>
  <li><code class="language-plaintext highlighter-rouge">context=[task1]</code> (Commented Out): We <em>could</em> explicitly tell <code class="language-plaintext highlighter-rouge">task2</code> that it depends on <code class="language-plaintext highlighter-rouge">task1</code>. However, when using a <code class="language-plaintext highlighter-rouge">sequential</code> <a href="05_process.md">Process</a> in the <a href="01_crew.md">Crew</a>, this dependency is usually handled automatically! The output of <code class="language-plaintext highlighter-rouge">task1</code> will be passed to <code class="language-plaintext highlighter-rouge">task2</code> as context.</li>
</ul>

<p>Running this code creates <code class="language-plaintext highlighter-rouge">Task</code> objects, ready to be managed by a <a href="01_crew.md">Crew</a>.</p>

<h2 id="task-workflow-and-context-connecting-the-dots">Task Workflow and Context: Connecting the Dots</h2>

<p>Tasks are rarely standalone. They often form a sequence, where the result of one task is needed for the next. This is where <code class="language-plaintext highlighter-rouge">context</code> comes in.</p>

<p>Imagine our <code class="language-plaintext highlighter-rouge">Crew</code> is set up with a <code class="language-plaintext highlighter-rouge">sequential</code> <a href="05_process.md">Process</a> (like in Chapter 1):</p>

<ol>
  <li>The <code class="language-plaintext highlighter-rouge">Crew</code> runs <code class="language-plaintext highlighter-rouge">task1</code> using the <code class="language-plaintext highlighter-rouge">researcher</code> agent.</li>
  <li>The <code class="language-plaintext highlighter-rouge">researcher</code> completes <code class="language-plaintext highlighter-rouge">task1</code> and produces an output (e.g., “1. Lisbon…”, “2. Seville…”, “3. Malta…”). This output is stored.</li>
  <li>The <code class="language-plaintext highlighter-rouge">Crew</code> moves to <code class="language-plaintext highlighter-rouge">task2</code>. Because it’s sequential, it automatically takes the output from <code class="language-plaintext highlighter-rouge">task1</code> and provides it as <em>context</em> to <code class="language-plaintext highlighter-rouge">task2</code>.</li>
  <li>The <code class="language-plaintext highlighter-rouge">planner</code> agent receives <code class="language-plaintext highlighter-rouge">task2</code>’s description <em>and</em> the list of cities from <code class="language-plaintext highlighter-rouge">task1</code> as context.</li>
  <li>The <code class="language-plaintext highlighter-rouge">planner</code> uses this context to complete <code class="language-plaintext highlighter-rouge">task2</code> (e.g., creates an itinerary for Lisbon).</li>
</ol>

<p>This automatic passing of information makes building workflows much easier!</p>

<pre><code class="language-mermaid">graph LR
    A["Task 1: Find Cities (Agent: Researcher)"] --&gt;|Output: Lisbon, Seville, Malta| B[Context for Task 2]
    B --&gt; C["Task 2: Create Itinerary (Agent: Planner)"]
    C --&gt;|Output: Lisbon Itinerary...| D[Final Result]

    style A fill:#f9f,stroke:#333,stroke-width:2px
    style C fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#ccf,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5
    style D fill:#cfc,stroke:#333,stroke-width:2px
</code></pre>

<p>While the <code class="language-plaintext highlighter-rouge">sequential</code> process often handles context automatically, you <em>can</em> explicitly define dependencies using the <code class="language-plaintext highlighter-rouge">context</code> parameter in the <code class="language-plaintext highlighter-rouge">Task</code> definition if you need more control, especially with more complex workflows.</p>

<h2 id="how-does-a-task-execute-under-the-hood">How Does a Task Execute “Under the Hood”?</h2>

<p>When the <a href="01_crew.md">Crew</a>’s <code class="language-plaintext highlighter-rouge">kickoff()</code> method runs a task, here’s a simplified view of what happens:</p>

<ol>
  <li><strong>Selection:</strong> The <a href="01_crew.md">Crew</a> (based on its <a href="05_process.md">Process</a>) picks the next <code class="language-plaintext highlighter-rouge">Task</code> to execute.</li>
  <li><strong>Agent Assignment:</strong> It identifies the <code class="language-plaintext highlighter-rouge">agent</code> assigned to this <code class="language-plaintext highlighter-rouge">Task</code>.</li>
  <li><strong>Context Gathering:</strong> It collects the output from any prerequisite tasks (like the previous task in a sequential process) to form the <code class="language-plaintext highlighter-rouge">context</code>.</li>
  <li><strong>Execution Call:</strong> The <a href="01_crew.md">Crew</a> tells the assigned <code class="language-plaintext highlighter-rouge">Agent</code> to execute the <code class="language-plaintext highlighter-rouge">Task</code>, passing the <code class="language-plaintext highlighter-rouge">description</code>, <code class="language-plaintext highlighter-rouge">expected_output</code>, available <code class="language-plaintext highlighter-rouge">tools</code> (if any specified for the task), and the gathered <code class="language-plaintext highlighter-rouge">context</code>.</li>
  <li><strong>Agent Work:</strong> The <a href="02_agent.md">Agent</a> uses its configuration (<a href="06_llm.md">LLM</a>, backstory, etc.) and the provided information (task details, context, tools) to perform the work.</li>
  <li><strong>Result Return:</strong> The <a href="02_agent.md">Agent</a> generates the result and returns it as a <code class="language-plaintext highlighter-rouge">TaskOutput</code> object.</li>
  <li><strong>Output Storage:</strong> The <a href="01_crew.md">Crew</a> receives this <code class="language-plaintext highlighter-rouge">TaskOutput</code> and stores it, making it available as potential context for future tasks.</li>
</ol>

<p>Let’s visualize the interaction:</p>

<pre><code class="language-mermaid">sequenceDiagram
    participant C as Crew
    participant T1 as Task 1
    participant R_Agent as Researcher Agent
    participant T2 as Task 2
    participant P_Agent as Planner Agent

    C-&gt;&gt;T1: Prepare to Execute
    Note right of T1: Task 1 selected
    C-&gt;&gt;R_Agent: Execute Task(T1.description, T1.expected_output)
    R_Agent-&gt;&gt;R_Agent: Use LLM, Profile, Tools...
    R_Agent--&gt;&gt;C: Return TaskOutput (Cities List)
    C-&gt;&gt;C: Store TaskOutput from T1

    C-&gt;&gt;T2: Prepare to Execute
    Note right of T2: Task 2 selected
    Note right of C: Get Context (Output from T1)
    C-&gt;&gt;P_Agent: Execute Task(T2.description, T2.expected_output, context=T1_Output)
    P_Agent-&gt;&gt;P_Agent: Use LLM, Profile, Tools, Context...
    P_Agent--&gt;&gt;C: Return TaskOutput (Itinerary)
    C-&gt;&gt;C: Store TaskOutput from T2
</code></pre>

<p><strong>Diving into the Code (<code class="language-plaintext highlighter-rouge">task.py</code>)</strong></p>

<p>The <code class="language-plaintext highlighter-rouge">Task</code> class itself is defined in <code class="language-plaintext highlighter-rouge">crewai/task.py</code>. It’s primarily a container for the information you provide:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Simplified view from crewai/task.py
</span><span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">Any</span>
<span class="c1"># Import Agent and Tool placeholders for the example
</span><span class="kn">from</span> <span class="nn">crewai</span> <span class="kn">import</span> <span class="n">BaseAgent</span><span class="p">,</span> <span class="n">BaseTool</span>

<span class="k">class</span> <span class="nc">TaskOutput</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span> <span class="c1"># Simplified representation of the result
</span>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">raw</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">agent</span><span class="p">:</span> <span class="nb">str</span>
    <span class="c1"># ... other fields like pydantic, json_dict
</span>
<span class="k">class</span> <span class="nc">Task</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="c1"># Core attributes
</span>    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">"Description of the actual task."</span><span class="p">)</span>
    <span class="n">expected_output</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s">"Clear definition of expected output."</span><span class="p">)</span>
    <span class="n">agent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BaseAgent</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"Agent responsible."</span><span class="p">)</span>

    <span class="c1"># Optional attributes
</span>    <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="s">"Task"</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"Context from other tasks."</span><span class="p">)</span>
    <span class="n">tools</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">BaseTool</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"Task-specific tools."</span><span class="p">)</span>
    <span class="n">async_execution</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">output_json</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">output_pydantic</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">BaseModel</span><span class="p">]]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">output_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="n">callback</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span> <span class="c1"># Function to call after execution
</span>
    <span class="c1"># Internal state
</span>    <span class="n">output</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TaskOutput</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">"Task output after execution"</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">execute_sync</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">agent</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">BaseAgent</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
        <span class="n">tools</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">BaseTool</span><span class="p">]]</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TaskOutput</span><span class="p">:</span>
        <span class="c1"># 1. Identify the agent to use (passed or self.agent)
</span>        <span class="n">agent_to_execute</span> <span class="o">=</span> <span class="n">agent</span> <span class="ow">or</span> <span class="bp">self</span><span class="p">.</span><span class="n">agent</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">agent_to_execute</span><span class="p">:</span>
            <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="s">"No agent assigned to task."</span><span class="p">)</span>

        <span class="c1"># 2. Prepare tools (task tools override agent tools if provided)
</span>        <span class="n">execution_tools</span> <span class="o">=</span> <span class="n">tools</span> <span class="ow">or</span> <span class="bp">self</span><span class="p">.</span><span class="n">tools</span> <span class="ow">or</span> <span class="n">agent_to_execute</span><span class="p">.</span><span class="n">tools</span>

        <span class="c1"># 3. Call the agent's execute_task method
</span>        <span class="c1">#    (The agent handles LLM calls, tool use, etc.)
</span>        <span class="n">raw_result</span> <span class="o">=</span> <span class="n">agent_to_execute</span><span class="p">.</span><span class="n">execute_task</span><span class="p">(</span>
            <span class="n">task</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="c1"># Pass self (the task object)
</span>            <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
            <span class="n">tools</span><span class="o">=</span><span class="n">execution_tools</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># 4. Format the output
</span>        <span class="c1"># (Handles JSON/Pydantic conversion if requested)
</span>        <span class="n">pydantic_output</span><span class="p">,</span> <span class="n">json_output</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">_export_output</span><span class="p">(</span><span class="n">raw_result</span><span class="p">)</span>

        <span class="c1"># 5. Create and return TaskOutput object
</span>        <span class="n">task_output</span> <span class="o">=</span> <span class="n">TaskOutput</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">description</span><span class="p">,</span>
            <span class="n">raw</span><span class="o">=</span><span class="n">raw_result</span><span class="p">,</span>
            <span class="n">pydantic</span><span class="o">=</span><span class="n">pydantic_output</span><span class="p">,</span>
            <span class="n">json_dict</span><span class="o">=</span><span class="n">json_output</span><span class="p">,</span>
            <span class="n">agent</span><span class="o">=</span><span class="n">agent_to_execute</span><span class="p">.</span><span class="n">role</span><span class="p">,</span>
            <span class="c1"># ... other fields
</span>        <span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">task_output</span> <span class="c1"># Store the output within the task object
</span>
        <span class="c1"># 6. Execute callback if defined
</span>        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">callback</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">callback</span><span class="p">(</span><span class="n">task_output</span><span class="p">)</span>

        <span class="c1"># 7. Save to file if output_file is set
</span>        <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">output_file</span><span class="p">:</span>
            <span class="c1"># ... logic to save file ...
</span>            <span class="k">pass</span>

        <span class="k">return</span> <span class="n">task_output</span>

    <span class="k">def</span> <span class="nf">prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="c1"># Combines description and expected output for the agent
</span>        <span class="k">return</span> <span class="sa">f</span><span class="s">"</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">description</span><span class="si">}</span><span class="se">\n\n</span><span class="s">Expected Output:</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="p">.</span><span class="n">expected_output</span><span class="si">}</span><span class="s">"</span>

    <span class="c1"># ... other methods like execute_async, _export_output, _save_file ...
</span></code></pre></div></div>

<p>Key takeaways from the code:</p>

<ul>
  <li>The <code class="language-plaintext highlighter-rouge">Task</code> class holds the configuration (<code class="language-plaintext highlighter-rouge">description</code>, <code class="language-plaintext highlighter-rouge">expected_output</code>, <code class="language-plaintext highlighter-rouge">agent</code>, etc.).</li>
  <li>The <code class="language-plaintext highlighter-rouge">execute_sync</code> (and <code class="language-plaintext highlighter-rouge">execute_async</code>) method orchestrates the execution <em>by calling the assigned agent’s <code class="language-plaintext highlighter-rouge">execute_task</code> method</em>. The task itself doesn’t contain the AI logic; it delegates that to the agent.</li>
  <li>It takes the raw result from the agent and wraps it in a <code class="language-plaintext highlighter-rouge">TaskOutput</code> object, handling formatting (like JSON) and optional actions (callbacks, file saving).</li>
  <li>The <code class="language-plaintext highlighter-rouge">prompt()</code> method shows how the core instructions are formatted before being potentially combined with context and tool descriptions by the agent.</li>
</ul>

<h2 id="advanced-task-features-a-quick-peek">Advanced Task Features (A Quick Peek)</h2>

<p>While we focused on the basics, <code class="language-plaintext highlighter-rouge">Task</code> has more capabilities:</p>

<ul>
  <li><strong>Asynchronous Execution (<code class="language-plaintext highlighter-rouge">async_execution=True</code>):</strong> Allows multiple tasks to run concurrently, potentially speeding up your Crew if tasks don’t strictly depend on each other’s immediate output.</li>
  <li><strong>Structured Outputs (<code class="language-plaintext highlighter-rouge">output_json</code>, <code class="language-plaintext highlighter-rouge">output_pydantic</code>):</strong> Force the agent to return data in a specific Pydantic model or JSON structure, making it easier to use the output programmatically.</li>
  <li><strong>File Output (<code class="language-plaintext highlighter-rouge">output_file='path/to/output.txt'</code>):</strong> Automatically save the task’s result to a specified file.</li>
  <li><strong>Conditional Tasks (<code class="language-plaintext highlighter-rouge">ConditionalTask</code>):</strong> A special type of task (defined in <code class="language-plaintext highlighter-rouge">crewai.tasks.conditional_task</code>) that only runs if a specific condition (based on the previous task’s output) is met. This allows for branching logic in your workflows.</li>
</ul>

<h2 id="conclusion">Conclusion</h2>

<p>You’ve now learned about the <code class="language-plaintext highlighter-rouge">Task</code> – the fundamental unit of work in CrewAI. A <code class="language-plaintext highlighter-rouge">Task</code> defines <em>what</em> needs to be done (<code class="language-plaintext highlighter-rouge">description</code>), what the result should look like (<code class="language-plaintext highlighter-rouge">expected_output</code>), and <em>who</em> should do it (<code class="language-plaintext highlighter-rouge">agent</code>). Tasks are the building blocks of your Crew’s plan, and their outputs often flow as <code class="language-plaintext highlighter-rouge">context</code> to subsequent tasks, creating powerful workflows.</p>

<p>We’ve seen how to define Agents and give them Tasks. But what if an agent needs a specific ability, like searching the internet, calculating something, or reading a specific document? How do we give our agents superpowers? That’s where <a href="04_tool.md">Tools</a> come in! Let’s explore them in the next chapter.</p>

<p><strong>Next:</strong> <a href="04_tool.md">Chapter 4: Tool - Equipping Your Agents</a></p>

<hr />

<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a></p>
